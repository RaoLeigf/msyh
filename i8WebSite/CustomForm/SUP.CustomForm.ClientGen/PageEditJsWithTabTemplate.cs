// ------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本: 14.0.0.0
//  
//     对此文件的更改可能导致不正确的行为，如果
//     重新生成代码，则所做更改将丢失。
// </auto-generated>
// ------------------------------------------------------------------------------
namespace SUP.CustomForm.ClientGen
{
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "14.0.0.0")]
    public partial class PageEditJsWithTabTemplate : PageEditJsWithTabTemplateBase
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public virtual string TransformText()
        {
            this.Write(@"//------------------------------全局函数------------------------------
//附件接收返回值
function AttachReturnValue(key, value) {
    AttachReturnRefresh(key, value);
}


//------------------------------全局变量------------------------------
//全局变量
Ext.useShims = true;  //帮助显示在最顶层
var attfrom;  //附件打开自form、grid还是list
var blobdocUrl = '';  //金格控件url
var Guid = new GUID();  //用于生成guid
var eform = '");
            
            #line 14 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\';  //工作流等的key \r\nvar busname = \'");
            
            #line 15 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PForm));
            
            #line default
            #line hidden
            this.Write("\';\r\nvar classname = \'");
            
            #line 16 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("\';\r\nvar tablenameM = \'");
            
            #line 17 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\';\r\nvar istask = \'");
            
            #line 18 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(IsTask));
            
            #line default
            #line hidden
            this.Write(@"';
var otypeori = otype;

var curToolbar;  //当前工具栏
var curForm;  //当前form
var curGrid;  //当前grid
var curStore;  //当前store

var isMultiSelect = false;  //grid是否复选
var isForbidSave = false;  //禁止保存，防止连续点击保存按钮重复请求

//------------------------------onReady------------------------------
Ext.onReady(function () {
	//布局前初始化函数
    if (typeof allInitEdit === ""function"") {
        allInitEdit();
    }

	//虚面板，用于调整某些事件的触发时机
    var virtualPanel = Ext.create('Ext.panel.Panel', {});
    virtualPanel.addEvents('afterViewport');  //viewport建完后触发

	//工具栏
	var toolbarStr;

	if (IsSso == 'true') {
		toolbarStr = ['->', '', 'close'];  //单点登录预览按钮特殊处理
	}
	else {
		toolbarStr = [");
            
            #line 47 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetButtons(Toolbar,"Edit")));
            
            #line default
            #line hidden
            this.Write("];\r\n\t}\r\n\r\n\tvar ngToolbar = Ext.create(\'Ext.ng.Toolbar\', {\r\n\t\tregion: \'north\',\r\n\t\t" +
                    "rightName: \'");
            
            #line 52 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(QForm));
            
            #line default
            #line hidden
            this.Write("\', //权限名称\r\n\t\tid: \'toolbar\',\r\n\t\tngbuttons: toolbarStr\r\n\t});\r\n\r\n\t");
            
            #line 57 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasBlobdoc != "0") { 
            
            #line default
            #line hidden
            this.Write(@"		//创建金格panel
		var blobdocPanel = Ext.create('Ext.panel.Panel', {
			id: 'BlobdocPanel',
			region: 'center',
			width: '100%',
			height: '100%',
			layout: 'fit',
			html: '<div id=""webofficetab"" style=""height:100%""><iframe src="""" style=""width:100% !important;height:100%;"" scrolling=""auto"" id=""webofficeiframe""></iframe></div>',
			listeners: {
				beforeRender: function (com, eOpts) {

				},
				render: function (com, eOpts) {

				}
			}
		});
	");
            
            #line 75 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 77 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasEppocx != "0") { 
            
            #line default
            #line hidden
            this.Write(@"		var eppocxPanel = document.createElement('IFRAME');
		eppocxPanel.scrolling = 'auto';
		eppocxPanel.frameBorder = 0;
		eppocxPanel.src = '';
		eppocxPanel.height = '100%';
		eppocxPanel.width = '100%';

		virtualPanel.on('afterViewport', function () {
			mstform.on('dataready', function () {
				if (Ext.getCmp('pc')) {
					var pcid = Ext.getCmp('pc').getValue();
					if (!Ext.isEmpty(pcid)) {
						eppocxPanel.src = C_ROOT + ""Schedules/SpmNetPlan/EScheduleChild?pc="" + pcid;
					}
				}
			});
		});
	");
            
            #line 95 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 97 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (PictureBoxs.Count > 0) { 
            
            #line default
            #line hidden
            this.Write("\t    //创建图片控件\r\n\t\t");
            
            #line 99 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PictureBoxs.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t    var ");
            
            #line 100 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("Upload = Ext.create(\"Ext.form.field.File\", {\r\n                msgTarget: \'side\',\r" +
                    "\n                flex: 1,\r\n                buttonText: \'上传\',\r\n                li" +
                    "steners: {\r\n\t\t\t\t    afterrender: function () {\r\n                        ");
            
            #line 106 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write(@"Upload.el.down('input').dom.style.display = 'none';
                    },
                    change: function () {
                        var form = this.up('form').getForm();
                        form.submit({
                            url: C_ROOT + '");
            
            #line 111 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 111 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/");
            
            #line 111 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("ImageUpload\',\r\n                            waitMsg: \'上传图片中...\',\r\n                " +
                    "            success: function (fp, o) {\r\n\t\t\t\t\t\t\t    if (o.result.success) {\r\n   " +
                    "                                 var path = o.result.path;\r\n\t\t\t\t\t\t\t        Ext.g" +
                    "etCmp(\'");
            
            #line 116 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("\' + \'picCom\').getEl().dom.src = C_ROOT + path;\r\n\t\t\t\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 117 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("\' + \'picCom\').show();\r\n\t\t\t\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 118 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write(@"' + '_url').setValue(path);
								}
                            },
							failure: function (fp, o) {
							    Ext.MessageBox.alert('提示', o.result.msg);
							}
                        });
                    }
                }
            });

			var ");
            
            #line 129 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picPanel = Ext.create(\"Ext.form.Panel\", {\r\n\t\t\t    ");
            
            #line 130 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t    width: ");
            
            #line 131 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tx: ");
            
            #line 132 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].XPos));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\ty: ");
            
            #line 133 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].YPos));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\t");
            
            #line 134 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tcolspan : ");
            
            #line 135 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].ColSpan));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\t");
            
            #line 136 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                border: false,\r\n\t\t\t\t");
            
            #line 138 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (!string.IsNullOrEmpty(PictureBoxs[i].Tag)) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\ttitle: ");
            
            #line 139 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Tag));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\t");
            
            #line 140 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tmargin: \'0 10 0 0\',\r\n\t\t\t\titems: [\r\n                    {\r\n                   " +
                    "     xtype: \'component\',\r\n                        width: \'100%\',\r\n              " +
                    "          height: ");
            
            #line 146 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Height));
            
            #line default
            #line hidden
            this.Write(",\r\n                        id: \'");
            
            #line 147 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picCom\',\r\n\t\t\t\t\t\thidden : true,\r\n                        autoEl: { tag: \'img\', src" +
                    ": \'\' },\r\n\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t    render: function() {\r\n\t\t\t\t\t\t\t    Ext.fly(" +
                    "this.el).on(\'click\', function(e,t) {\r\n\t\t\t\t\t\t\t\t    window.open(Ext.getCmp(\'");
            
            #line 153 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picCom\').getEl().dom.src);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t}\r\n                  " +
                    "  },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t    layout: \'hbox\',\r\n\t\t\t\t\t    border: false,\r\n\t\t\t\t\t    items:" +
                    " [\r\n\t\t\t\t\t        ");
            
            #line 162 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write(@"Upload,
					        {
                                flex: 1,
							    border: false,
							    items: [
							        {
						                xtype: 'button',
                                        text: '下载',
							            margin: '1.5 30 0 30',
							            id: '");
            
            #line 171 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("Download\',\r\n\t\t\t\t\t\t\t            hidden : true,\r\n                                  " +
                    "      handler: function() {\r\n                                            var url" +
                    " = Ext.getCmp(\'");
            
            #line 174 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write(@"picCom').getEl().dom.src;
						    	            var a = document.createElement('a');
						    	            var event = new MouseEvent('click');
						    	            a.href = url;
						    	            a.download = '';
						    	            a.dispatchEvent(event);
                                        }
							        }
							    ]
					        }
					    ]
					}
			    ]
			});
		");
            
            #line 188 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 189 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 191 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (fieldSets.Count==0 && tableLayouts.AllFields.Count > 0 ) { 
            
            #line default
            #line hidden
            this.Write("\t\t");
            
            #line 192 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout) { 
            
            #line default
            #line hidden
            this.Write("\t\tvar mstform = Ext.create(\'Ext.ng.TableLayoutForm\', {\r\n\t\t\tid: \'");
            
            #line 194 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t");
            
            #line 195 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (BodyCmpCount == 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'center\',\r\n\t\t");
            
            #line 197 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'north\',\r\n\t\t");
            
            #line 199 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tbuskey: \'");
            
            #line 200 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\', //对应的业务表主键\r\n\t\t\tautoScroll: true,\r\n\t\t\totype: otype,\r\n\t\t\tminHeight: ");
            
            #line 203 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFormHeight(tableLayouts)));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\tlayout: {\r\n\t\t\t\ttype: \'absolute\'\r\n\t\t\t},\r\n\t\t\tcolumnsPerRow: ");
            
            #line 207 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.ColumnsPerRow));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\tfieldDefaults: {\r\n\t\t\t\tlabelWidth: ");
            
            #line 209 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.FormLabelWidth));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tmargin: \'3 10 3 0\',\r\n\t\t\t\t//anchor: \'100%\',  //绝对布局下锚定不要\r\n\t\t\t\tmsgTarget: \'s" +
                    "ide\'\r\n\t\t\t},\t\t\t\r\n\t\t\tfields: [\r\n\t\t\t\t\t");
            
            #line 215 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFormAbs(tableLayouts, PictureBoxs)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t]\r\n\t\t});\r\n\t\t");
            
            #line 218 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\tvar mstform = Ext.create(\'Ext.ng.TableLayoutForm\', {\r\n\t\t\tid: \'");
            
            #line 220 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t");
            
            #line 221 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (BodyCmpCount == 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'center\',\r\n\t\t");
            
            #line 223 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'north\',\r\n\t\t");
            
            #line 225 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tbuskey: \'");
            
            #line 226 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\', //对应的业务表主键\r\n\t\t\tautoScroll: true,\r\n\t\t\totype: otype,\r\n\t\t");
            
            #line 229 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (BodyCmpCount == 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tminHeight: ");
            
            #line 230 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFormHeight(tableLayouts)));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t");
            
            #line 231 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tcolumnsPerRow: ");
            
            #line 232 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.ColumnsPerRow));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\tisBuildByRows: true,\r\n\t\t\tfieldDefaults: {\r\n\t\t\t\tlabelWidth: ");
            
            #line 235 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.FormLabelWidth));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tmargin: \'3 10 3 0\',\r\n\t\t\t\tanchor: \'100%\',\r\n\t\t\t\tmsgTarget: \'side\'\r\n\t\t\t},\t\r\n\t" +
                    "\t\tfieldRows: [\t\t\t\t\r\n\t\t\t\t");
            
            #line 241 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetForm(tableLayouts, PictureBoxs)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t]\r\n\t\t});\r\n\t\t");
            
            #line 244 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 245 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t");
            
            #line 248 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < AllGrids.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t//");
            
            #line 249 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid\r\n\t\tvar ");
            
            #line 250 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("cellEditing = Ext.create(\'Ext.grid.plugin.CellEditing\', {\r\n\t\t\tclicksToEdit: 1,  /" +
                    "/单击编辑，单元格修改\r\n\t\t\tlisteners: {\r\n\t\t\t\tedit: function (editor, e) {\r\n\t\t\t\t\tif (e.origi" +
                    "nalValue == e.value) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t");
            
            #line 258 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
    if (Expressions.ContainsValue("GridNormal")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 259 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 260 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            if (item.Value == "GridNormal") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 261 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t\t");
            
            #line 262 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            }}} 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t");
            
            #line 267 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t//--树grid\r\n\t\t\tvar ");
            
            #line 269 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid = Ext.create(\'Ext.ng.TreePanel\', {\r\n\t\t\t");
            
            #line 270 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].Title != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\ttitle: \'");
            
            #line 271 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Title));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t");
            
            #line 272 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\theight: ");
            
            #line 273 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Height > 200 ? AllGrids[i].Height : 200));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tregion: \'");
            
            #line 274 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Region));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\tid: \'");
            
            #line 275 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid\',\r\n\t\t\t\tmargin: \'0 0 10 0\',\r\n\t\t\t");
            
            #line 277 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (!string.IsNullOrEmpty(AllGrids[i].LevelSum)) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tsumByLevel: true,\r\n                sumByLevelCols: [");
            
            #line 279 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].LevelSum));
            
            #line default
            #line hidden
            this.Write("], //级次汇总列\r\n\t\t\t");
            
            #line 280 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t");
            
            #line 281 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout && !AllGrids[i].IsInTab) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tx: ");
            
            #line 282 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].X));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\ty: ");
            
            #line 283 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Y));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\twidth: ");
            
            #line 284 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 285 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tminHeight: ");
            
            #line 286 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Height < 150 ? 150 : AllGrids[i].Height));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 287 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].Collapse == "1") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tcollapsible: true,\r\n\t\t\t");
            
            #line 289 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\r\n\t\t\t\tbuskey: \'");
            
            #line 290 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\', //对应的业务表主键属性\r\n\t\t\t\totype: otype,\r\n\t\t\t\tautoLoad: false,\r\n\t\t\t\tcolumnLines: true,\r" +
                    "\n\t\t\t\trowLines: true,\r\n\t\t\t\turl: C_ROOT + \'");
            
            #line 295 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 295 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/Get");
            
            #line 295 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("List?istreegrid=1&id=\' + busid,\r\n\t\t\t\ttreeFields: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \'phid\',\r\n" +
                    "\t\t\t\t\t\ttype: \'string\',\r\n\t\t\t\t\t\tmapping: \'phid\'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t");
            
            #line 302 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetPageModelFields(AllGrids[i],"Edit",4)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t],\t\t\t\r\n\t\t\t\tcolumns: [");
            
            #line 304 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetPageGridColumns(AllGrids[i],"Edit",4)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t");
            
            #line 305 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].Columns.Count>0){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t,{\r\n\t\t\t\t\ttext: \'主键\',\r\n\t\t\t\t\tdataIndex: \'");
            
            #line 308 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\t\thidden: true\r\n\t\t\t\t}\r\n\t\t\t\t");
            
            #line 311 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t],        \t\t\r\n\t\t\t\tlisteners: {\r\n\t\t\t\t\tbeforeedit: function (editor, e, eOpts) " +
                    "{\r\n\t\t\t\t\t\t//有物资列的话，单位列设为只读\r\n\t\t\t\t\t\tif (e.field == \'msunit_name\') {\r\n\t\t\t\t\t\t\tif (");
            
            #line 317 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getColumn(\'itemid\')) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t" +
                    "\t\t\t");
            
            #line 322 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("asr_flg")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t,\r\n\t\t\t\t\t\tcelldblclick: function (editor, td, cellIndex, record, tr, rowInde" +
                    "x, e, eOpts) {\r\n\t\t\t\t\t\t\tif (editor.getHeaderAtIndex(cellIndex).dataIndex == \'asr_" +
                    "flg\') {\r\n\t\t\t\t\t\t\t\tcurGrid = ");
            
            #line 326 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid;\r\n\t\t\t\t\t\t\t\tcurGrid.getSelectionModel().select(rowIndex);\r\n\t\t\t\t\t\t\t\tOpenAttachm" +
                    "ent(\'grid\', \'");
            
            #line 328 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("\');\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t");
            
            #line 331 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t},\r\n\t\t\t\tplugins: [");
            
            #line 333 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("cellEditing\t\t\r\n\t\t\t\t\t\t");
            
            #line 334 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("res_code")) { 
            
            #line default
            #line hidden
            this.Write(@"							,
							{
								pluginId: 'itempropertycellediting',
								ptype: 'itempropertycellediting',
								resPropertysCol: 'res_propertys',////组合名称字段名，不显示可空
								resMasterDataCol: '',////资源信息字段名，不修改保存可空
								phidItemDetailCol: 'itemid'////事物特性内容主键字段名，不可空
							}
						");
            
            #line 343 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t] //绑定编辑对象\r\n\t\t\t});\r\n\r\n\t\t\tvar ");
            
            #line 347 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store = ");
            
            #line 347 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.store;\r\n\t\t");
            
            #line 348 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\r\n\t\t\tExt.define(\'");
            
            #line 349 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("model\', {\r\n\t\t\t\textend: \'Ext.data.Model\',\r\n\t\t\t\tfields: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: \'phid\'" +
                    ",\r\n\t\t\t\t\ttype: \'string\',\r\n\t\t\t\t\tmapping: \'phid\'\r\n\t\t\t\t},\r\n\t\t\t\t");
            
            #line 357 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetPageModelFields(AllGrids[i],"Edit",4)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t]\r\n\t\t\t});\r\n\r\n\t\t\tvar ");
            
            #line 361 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store = Ext.create(\'Ext.ng.JsonStore\', {\r\n\t\t\t\tmodel: ");
            
            #line 362 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("model,\r\n\t\t\t\tautoLoad: false,\r\n\t\t\t");
            
            #line 364 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].Groupfield.Count > 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tgroupField: otype == \'view\' ? \'s_groupfield\' : \'\',\r\n\t\t\t");
            
            #line 366 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\turl: C_ROOT + \'");
            
            #line 367 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 367 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/Get");
            
            #line 367 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("List\'\r\n\t\t\t});\t\t\t\r\n\r\n\t\t\tvar ");
            
            #line 370 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid = Ext.create(\'Ext.ng.GridPanel\', {\r\n\t\t\t");
            
            #line 371 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].Title != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\ttitle: \'");
            
            #line 372 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Title));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t");
            
            #line 373 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t    height: ");
            
            #line 374 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Height > 200 ? AllGrids[i].Height : 200));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tregion: \'");
            
            #line 375 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Region));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\tid: \'");
            
            #line 376 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid\',\r\n\t\t\t\tmargin: \'0 0 10 0\',\r\n\t\t\t\tstateful: true,\r\n\t\t\t\tstateId: \'");
            
            #line 379 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid\',\r\n\t\t\t\tmultiSelect: isMultiSelect,\t\r\n\t\t\t");
            
            #line 381 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].Sumdic.Count > 0 || AllGrids[i].Subdic.Count > 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tfeatures: ");
            
            #line 382 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetSummary(AllGrids[i])));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 383 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tstore: ");
            
            #line 384 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store,\r\n\t\t\t");
            
            #line 385 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout && !AllGrids[i].IsInTab) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tx: ");
            
            #line 386 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].X));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\ty: ");
            
            #line 387 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Y));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\twidth: ");
            
            #line 388 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 389 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tminHeight: ");
            
            #line 390 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Height < 150 ? 150 : AllGrids[i].Height));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 391 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].Collapse == "1") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tcollapsible: true,\r\n\t\t\t");
            
            #line 393 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\r\n\t\t\t\tbuskey: \'");
            
            #line 394 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\', //对应的业务表主键属性\r\n\t\t\t\totype: otype,\r\n\t\t\t\tcolumnLines: true,\r\n\t\t\t\tcolumns: [");
            
            #line 397 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetPageGridColumns(AllGrids[i],"Edit",4)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t");
            
            #line 398 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].Columns.Count>0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t,{\r\n\t\t\t\t\theader: \'主键\',\r\n\t\t\t\t\tdataIndex: \'");
            
            #line 401 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\t\thidden: true\r\n\t\t\t\t}\r\n\t\t\t\t");
            
            #line 404 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t],\r\n\t\t\t\tlisteners: {\r\n\t\t\t\t\tbeforeedit: function (editor, e, eOpts) {\r\n\t\t\t\t\t\t/" +
                    "/有物资列的话，单位列设为只读\r\n\t\t\t\t\t\tif (e.field == \'msunit_name\') {\r\n\t\t\t\t\t\t\tif (");
            
            #line 410 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getColumn(\'itemid\')) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t" +
                    "\t\t\t");
            
            #line 415 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("asr_flg")){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t,\r\n\t\t\t\t\t\tcelldblclick: function (editor, td, cellIndex, record, tr, rowInde" +
                    "x, e, eOpts) {\r\n\t\t\t\t\t\t\tif (editor.getHeaderAtIndex(cellIndex).dataIndex == \'asr_" +
                    "flg\') {\r\n\t\t\t\t\t\t\t\tcurGrid = ");
            
            #line 419 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid;\r\n\t\t\t\t\t\t\t\tcurGrid.getSelectionModel().select(rowIndex);\r\n\t\t\t\t\t\t\t\tOpenAttachm" +
                    "ent(\'grid\', \'");
            
            #line 421 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("\');\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t");
            
            #line 424 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t},\r\n\t\t\t\tplugins: [");
            
            #line 426 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("cellEditing\r\n\t\t\t\t\t\t");
            
            #line 427 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("res_code")) { 
            
            #line default
            #line hidden
            this.Write(@"							,
							{
								pluginId: 'itempropertycellediting',
								ptype: 'itempropertycellediting',
								resPropertysCol: 'res_propertys',////组合名称字段名，不显示可空
								resMasterDataCol: '',////资源信息字段名，不修改保存可空
								phidItemDetailCol: 'itemid'////事物特性内容主键字段名，不可空
							}
						");
            
            #line 436 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t] //绑定编辑对象\r\n\t\t\t}); \r\n\t\t");
            
            #line 439 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t");
            
            #line 441 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("res_code")) { 
            
            #line default
            #line hidden
            this.Write("\t\t//事物特性控件批量录入\r\n\t\t");
            
            #line 443 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getPlugin(\'itempropertycellediting\').on(\'onBatchInput\', function (records) {" +
                    "\r\n\t\t\tvar addrows = ");
            
            #line 444 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getSelectionModel().getSelection();\r\n\t\t\tif (addrows.length > 0) {\r\n\t\t\t\tExt.A" +
                    "rray.forEach(records, function (item) {\r\n\t\t\t\t\tvar data = {};\r\n\t\t\t\t\tExt.apply(dat" +
                    "a, addrows[0].data);\r\n\t\t\t\t\tExt.apply(data, item);\r\n\r\n\t\t\t\t\t");
            
            #line 451 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.addrow(data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t");
            
            #line 455 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\r\n\t\t");
            
            #line 457 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("res_code")) { 
            
            #line default
            #line hidden
            this.Write("\t\t//事物特性控件批量录入\r\n\t\t");
            
            #line 459 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getPlugin(\'itempropertycellediting\').on(\'onBatchInput\', function (records) {" +
                    "\r\n\t\t\tvar addrows = ");
            
            #line 460 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getSelectionModel().getSelection();\r\n\t\t\tif (addrows.length > 0) {\r\n\t\t\t\tExt.A" +
                    "rray.forEach(records, function (item) {\r\n\t\t\t\t\tvar data = {};\r\n\t\t\t\t\tExt.apply(dat" +
                    "a, addrows[0].data);\r\n\t\t\t\t\tExt.apply(data, item);\r\n\r\n\t\t\t\t\t");
            
            #line 467 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.addrow(data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t");
            
            #line 471 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t//设定当前grid和store\r\n\t\t");
            
            #line 474 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.addListener(\'containerclick\', function (me, e, eOpts) {\r\n\t\t\tcurGrid = ");
            
            #line 475 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid;\r\n\t\t\tcurStore = curGrid.store;\r\n\t\t\tsetButtonStatus(curGrid);\r\n\t\t});\r\n\t\t");
            
            #line 479 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.addListener(\'cellclick\', function (me, rowIndex, columnIndex, e) {\r\n\t\t\tcurGr" +
                    "id = ");
            
            #line 480 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid;\r\n\t\t\tcurStore = curGrid.store;\r\n\t\t\tsetButtonStatus(curGrid);\r\n\t\t});\r\n\t");
            
            #line 484 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("\t\t ");
            
            #line 485 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getView().getRowClass = function (record, index, rowParams, store) {\r\n      " +
                    "      if (!record.data.leaf) {\r\n                return \'row-parentLevel\';\r\n     " +
                    "       }\r\n\t\t\telse{\r\n\t\t\t    return \'row-leafLevel\';\r\n\t\t\t}\r\n        };\r\n\t");
            
            #line 493 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 495 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 497 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasAsrGrid == "1") { 
            
            #line default
            #line hidden
            this.Write("\t    //附件单据体\r\n\t\tvar asrgridstore = Ext.create(\'Ext.ng.JsonStore\', {\r\n\t\t\tfields: [" +
                    "\'asr_name\', \'logid\', \'asr_dt\'],\r\n\t\t    autoLoad: false,\r\n\t\t\turl: C_ROOT + \'");
            
            #line 502 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 502 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/GetAsrGridList\'\r\n\t\t});\r\n\r\n\t\tvar asrgrid = Ext.create(\'Ext.ng.GridPanel\', {\r\n" +
                    "\t\t");
            
            #line 506 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (!AsrGrid.IsInTab) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tx: ");
            
            #line 507 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AsrGrid.X));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\ty: ");
            
            #line 508 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AsrGrid.Y));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\twidth: ");
            
            #line 509 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AsrGrid.Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\theight: ");
            
            #line 510 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AsrGrid.Height));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t");
            
            #line 511 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t    title: \'附件单据体\',\r\n\t\t\tstore: asrgridstore,\r\n\t\t\tcolumnLines: true,\r\n\t\t\tcolumns" +
                    ": [");
            
            #line 515 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetAsrGridColumns(AsrGrid)));
            
            #line default
            #line hidden
            this.Write("]\r\n\t\t});\r\n\t");
            
            #line 517 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t//报表\r\n\t");
            
            #line 520 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetReportView(tabInfos)));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t//构建tab\r\n\tvar tabPanel0 = Ext.create(\'Ext.tab.Panel\', {\r\n\t\tid: \'tabPanel\',\r\n" +
                    "\t\tmargin: \'0 0 10 0\',\r\n\t\tregion: \'");
            
            #line 526 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tabInfos[0].Region));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t");
            
            #line 527 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout || (BodyCmpCount <= 1)) { 
            
            #line default
            #line hidden
            this.Write("\t\tx: ");
            
            #line 528 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tabInfos[0].XPos));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\ty: ");
            
            #line 529 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tabInfos[0].YPos));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\tminWidth: ");
            
            #line 530 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tabInfos[0].Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t");
            
            #line 531 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\tminHeight: ");
            
            #line 532 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tabInfos[0].Height < 500 && HasBlobdoc == "2" ? 500 : tabInfos[0].Height));
            
            #line default
            #line hidden
            this.Write(@",
		autoScroll: true,
		deferredRender: false,
		plain: true,
		anchor: '100%',
		listeners: {
			//解决金格控件加载的问题
			beforetabchange: function (tabpanel, nCard, oCard, eOpts) {
				document.body.focus(); //解决金格控件加载的问题
				if (oCard.hideMode == 'visibility') {
					oCard.body.dom.parentNode.style.height = '0px';
				}
				if (nCard.hideMode == 'visibility') {
					nCard.body.dom.parentNode.style.height = '100%';
				}
			}
		},
		items: [");
            
            #line 549 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetTabPanelItems(tabInfos)));
            
            #line default
            #line hidden
            this.Write("]\r\n\t});\r\n\t\r\n\t");
            
            #line 552 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (fieldSets.Count > 0) { 
            
            #line default
            #line hidden
            this.Write("   \r\n\t\t//fieldSets\r\n\t\tvar mstform = Ext.create(\'Ext.ng.FieldSetForm\', {\r\n\t\t\tid: \'" +
                    "");
            
            #line 555 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t");
            
            #line 556 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout || BodyCmpCount == 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'center\',\r\n\t\t");
            
            #line 558 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'north\',\r\n\t\t");
            
            #line 560 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tautoScroll: true,\r\n\t\t\tframe: true,\r\n\t\t\tborder: false,\r\n\t\t\tbuskey: \'");
            
            #line 564 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\totype: otype, //操作类型,add||edit\r\n\t\t\tminHeight: ");
            
            #line 566 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFormHeight(fieldSets)));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\tisBuildByRows: true,\r\n\t\t\tbodyStyle: \'padding-bottom:8px\',\r\n\t\t");
            
            #line 569 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if ( tableLayouts.IsAbsoluteLayout ) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tlayout: {\r\n\t\t\t\ttype: \'absolute\'\r\n\t\t\t},\r\n\t\t");
            
            #line 573 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tfieldDefaults: {\r\n\t\t\t\tlabelWidth: ");
            
            #line 575 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.FormLabelWidth));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tmargin: \'3 10 3 0\',\r\n\t\t\t\t//anchor: \'100%\',  //绝对布局下锚定不要\r\n\t\t\t\tmsgTarget: \'s" +
                    "ide\'\r\n\t\t\t},\r\n\t\t\tfieldSets: [\t\t\t\t    \r\n\t\t\t\t");
            
            #line 581 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFieldSetsExt(tableLayouts, fieldSets, tabInfos, panels, PictureBoxs)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t]\r\n\t\t});\r\n\t");
            
            #line 584 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t//布局面板数组\r\n\tvar layoutItem = [ngToolbar];\r\n\r\n\t//工作流panel\r\n\tvar buttonItem = [" +
                    "\'save\', \'attachment\'];\r\n\tif (");
            
            #line 592 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames.Count));
            
            #line default
            #line hidden
            this.Write(@" > 0 ){
		buttonItem.push('addrow');
		buttonItem.push('deleterow');
		buttonItem.push('import');
	}
	if (WorkFlowInfo.wfotype) {
		layoutItem.push({
			xtype: 'panel',
			region: 'north',
			height: 175,
			autoScroll: true,
			bodyStyle: ""padding-right:20px"",
			items: [{
				xtype: 'ngWorkFlowPanel',
				toolbar: ngToolbar,
				otype: otype,
				bizType: '");
            
            #line 608 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\tbizPhid: busid,\r\n\t\t\t\tshowToolBarItems: buttonItem,  //任务办理时可见toolbar按钮ite" +
                    "mid数组\r\n\t\t\t\tworkFlowInfo: WorkFlowInfo,\r\n\t\t\t\tbizSaveAsync: true,\r\n\t\t\t\tbizSaveFn: " +
                    "function (callback, oper) {\r\n\t\t\t\t\t//审批节点的话调审核前检测函数\r\n                    if (Work" +
                    "FlowInfo.compType == 3 && oper == \'taskComplete\' && typeof beforeVerifyEdit === " +
                    "\"function\") {\r\n                        if (!beforeVerifyEdit()) {\r\n             " +
                    "               return false;\r\n                        }\r\n                    }\r\n" +
                    "\r\n                    //调取消审批前检测函数\r\n                    if (WorkFlowInfo.isBizAp" +
                    "proved == true && WorkFlowInfo.compType == 3 && oper == \'rollBack\' && typeof bef" +
                    "oreUnVerifyEdit === \"function\") {\r\n                        if (!beforeUnVerifyEd" +
                    "it()) {\r\n                            return false;\r\n                        }\r\n " +
                    "                   }\r\n\t\t\t\t\tSave(callback);\r\n\t\t\t\t},\r\n\t\t\t\tgetAttachData : function" +
                    " (oper) {\r\n\t\t\t\t\t//调取消审批前检测函数\r\n                    if (WorkFlowInfo.isBizApproved" +
                    " == true && WorkFlowInfo.compType == 3 && oper == \'rollBack\' && typeof beforeUnV" +
                    "erifyEdit === \"function\") {\r\n                        if (!beforeUnVerifyEdit()) " +
                    "{\r\n                            return { funcname: \'@@##\' };\r\n                   " +
                    "     }\r\n                    }\r\n\r\n\t\t\t\t\tif (typeof getSaveDataEdit === \"function\")" +
                    " {\r\n                        if (WorkFlowInfo.compType == 3 && oper == \'taskCompl" +
                    "ete\') {\r\n                            return getSaveDataEdit(\"Approve\");\r\n       " +
                    "                 }\r\n\t\t\t\t\t\tif (WorkFlowInfo.isBizApproved == true && WorkFlowInfo" +
                    ".compType == 3 && oper == \'rollBack\') {\r\n                            return getS" +
                    "aveDataEdit(\"UnApprove\");\r\n                        }                        \r\n  " +
                    "                  } else {\r\n                        return;\r\n                   " +
                    " }\r\n\t\t\t\t},\r\n\t\t\t\tlisteners: {\r\n\t\t\t\t\ttaskComplete: function (compId, wfParam) {\r\n\t" +
                    "\t\t\t\t\t//alert(\"调用业务进行业务处理\")\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcolspan: 4\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\t\r" +
                    "\n\tlayoutItem.push({\r\n\t\txtype: \'panel\',\r\n\t\tlayout: \'border\',\r\n\t\tregion: \'center\'," +
                    "\r\n\t\tautoScroll: true,\r\n\t\tbodyStyle: \"padding-right:20px\",\r\n\t\titems: [");
            
            #line 664 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetViewPortItems(fieldSets, panels, tableLayouts, tabInfos)));
            
            #line default
            #line hidden
            this.Write("]\r\n\t});\r\n\r\n\t");
            
            #line 667 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasWfGrid == "1") { 
            
            #line default
            #line hidden
            this.Write("\tif (!WorkFlowInfo.wfotype && otype != \'copy\') {\r\n\t\tlayoutItem.push({\r\n\t\t\txtype: " +
                    "\'ngWorkFlowPanel\',\r\n\t\t\totype: otype,\r\n\t\t\tbizType: \'");
            
            #line 672 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\tbizPhid: busid,\r\n\t\t\tshowFlowHis: true,\r\n\t\t\thisGridStateId: \'");
            
            #line 675 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("workflowhisgrid\',\r\n\t\t\theight: 175,\r\n\t\t\tregion: \'south\',\r\n\t\t\tcolspan: 4\r\n\t\t});\r\n\t}" +
                    "\r\n\t");
            
            #line 681 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\r\n\t//布局\r\n\tvar viewport = Ext.create(\'Ext.container.Viewport\', {\r\n\t\tid: \"viewPort" +
                    "\",\r\n\t\tlayout: \'border\',\r\n\t\titems: layoutItem\r\n\t});\r\n\r\n\t//触发虚面板事件\r\n\tvirtualPanel." +
                    "fireEvent(\'afterViewport\');\r\n\r\n\t//edit 编辑初始化时公共代码\r\n\tCommonReadyEdit();\r\n\r\n\t");
            
            #line 696 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
    if (Expressions.ContainsValue("Normal")) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 697 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 698 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            if (item.Value == "Normal") { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 699 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 700 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            }}} 
            
            #line default
            #line hidden
            this.Write(" \r\n\r\n\t//设置grid列为只读、必输等状态\r\n\t");
            
            #line 703 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.SetGridColStatus(AllGrids)));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t//预览不做任何数据操作\r\n    if (IsSso == \'true\') {\r\n        return;\r\n    }\r\n\r\n\t//自定义帮助" +
                    "列添加外部查询条件\r\n\t");
            
            #line 711 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetOutFilter(tableLayouts, fieldSets, panels)));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t");
            
            #line 713 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasBlobdoc != "0") { 
            
            #line default
            #line hidden
            this.Write("\t//加载金格控件模板文件\r\n\tif (Ext.getCmp(\'otid\')) {\r\n\t\tExt.getCmp(\'otid\').addListener(\'befo" +
                    "retriggerclick\', function () {\r\n\t\t\t");
            
            #line 717 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasBlobdoc == "2") { 
            
            #line default
            #line hidden
            this.Write("            var activeTab = tabPanel0.getActiveTab();\r\n\r\n            if (activeTa" +
                    "b.id != \'blobdoc\') {\r\n                Ext.MessageBox.alert(\'提示\', \'导入模板前请先切换到文档控件" +
                    "页签!\');\r\n                return false;\r\n            }\r\n\t\t\t");
            
            #line 724 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t");
            
            #line 726 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (!string.IsNullOrEmpty(tableLayouts.Otid)) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tExt.getCmp(\'otid\').setClientSqlFilter(\"phid in (");
            
            #line 727 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.Otid));
            
            #line default
            #line hidden
            this.Write(")\");\r\n\t\t\t");
            
            #line 728 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
			Ext.getCmp('otid').setOutFilter({ 'chk_status': '1' });
			return true;
        });

        Ext.getCmp('otid').addListener('helpselected', function (obj) {
			blobdocUrl = C_ROOT + 'WM/Archive/KingGridObject/KingGridObjectEdit?OpType=Add&DataFrom=custom&RecordID=' + obj.code;

			if (obj.name.indexOf('.xlsx')>0) {
                blobdocUrl += '&FileType=' + '.xlsx';
            }
			else if (obj.name.indexOf('.xls')>0) {
                blobdocUrl += '&FileType=' + '.xls';
            }

			if (window.frames['webofficeiframe']) {
				if (window.frames['webofficeiframe'].document) {
					window.frames['webofficeiframe'].document.location = blobdocUrl;
				}
			}
        });
    }
	");
            
            #line 751 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\tif (otype == $Otype.EDIT || otype == $Otype.VIEW || otype == \'copy\') {\r\n\t\tExt." +
                    "Ajax.request({\r\n\t\t\tparams: { \'id\': busid },\r\n\t\t\tasync: false, //同步请求\r\n\t\t\turl: C_" +
                    "ROOT + \'");
            
            #line 757 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 757 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/GetMasterInfo\',\r\n\t\t\tsuccess: function (response) {\r\n\t\t\t\tvar resp = Ext.JSON." +
                    "decode(response.responseText);\r\n\t\t\t\tif (resp.Status === \"OK\") {\r\n\t\t\t\t\tvar formob" +
                    "j = mstform.getForm();\r\n\t\t\t\t\tformobj.setValues(resp.Data);\r\n\r\n\t\t\t\t\t");
            
            #line 764 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PictureBoxs.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\tif (otype == $Otype.VIEW) {\r\n\t\t\t\t\t\t");
            
            #line 766 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("Upload.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (resp.Data.");
            
            #line 768 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("_url != \'\' && resp.Data.");
            
            #line 768 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("_url != null){\r\n\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 769 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picCom\').getEl().dom.src = C_ROOT + resp.Data.");
            
            #line 769 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("_url;\r\n\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 770 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picCom\').show();\r\n\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 771 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("Download\').show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t");
            
            #line 773 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t\t//复制时单据编号要重新设置，主键phid要清空\r\n\t\t\t\t\tif (otype == \'copy\') {\r\n\t\t\t\t\t\tExt.getCmp(\'p" +
                    "hid\').setValue(\'\');\r\n\t\t\t\t\t\tExt.getCmp(\'code\').setValue(\'\');\r\n\t\t\t\t\t\tif (Ext.getCm" +
                    "p(\'bill_dt\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'bill_dt\').setValue(CurDate);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t" +
                    "\tif (Ext.getCmp(\'asr_flg\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'asr_flg\').setValue(\'0\');\r\n\t\t\t\t" +
                    "\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'ischeck\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'ischeck\').setValue(0" +
                    ");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'check_dt\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'check_dt\')." +
                    "setValue(null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'checkpsn\')) {\r\n\t\t\t\t\t\t\tExt.getCmp" +
                    "(\'checkpsn\').setValue(null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'bill_no\')) {\r\n\t\t\t\t\t" +
                    "\t\t Ext.getCmp(\'bill_no\').setValue(billno);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//任务分解\r\n\t\t\t\t\t\tif (E" +
                    "xt.getCmp(\'s_task_wf\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'s_task_wf\').setValue(PhidWork);\r\n\t" +
                    "\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'s_task_node\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'s_task_node\')" +
                    ".setValue(PhidWorkNode);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//记账字段清空\r\n                        if " +
                    "(Ext.getCmp(\'tr_date\')) {\r\n                            Ext.getCmp(\'tr_date\').set" +
                    "Value(null);\r\n                        }\r\n                        if (Ext.getCmp(" +
                    "\'voucher_flag\')) {\r\n                            Ext.getCmp(\'voucher_flag\').setVa" +
                    "lue(null);\r\n                        }\r\n                        if (Ext.getCmp(\'t" +
                    "r_num\')) {\r\n                            Ext.getCmp(\'tr_num\').setValue(null);\r\n  " +
                    "                      }\r\n                        if (Ext.getCmp(\'tr_type\')) {\r\n " +
                    "                           Ext.getCmp(\'tr_type\').setValue(null);\r\n              " +
                    "          }\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t");
            
            #line 821 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.BatchBindCombox(tableLayouts, fieldSets)));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t\t\t\t\tif (otype == $Otype.EDIT) {\r\n\t\t\t\t\t\t");
            
            #line 824 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.FireEvents(tableLayouts)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t\t\t");
            
            #line 825 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.FireEvents(fieldSets)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\r\n\t\t\t\t\t");
            
            #line 828 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasBlobdoc != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t//取得金格控件内容\r\n\t\t\t\t\tGetBlobDoc(\'edit\');\r\n\t\t\t\t\t");
            
            #line 831 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
					//mstform数据查出来赋完值后
                    mstform.fireEvent('dataready');
				} else {
					Ext.MessageBox.alert('取数失败', resp.status);
				}

				//保存form初始值
				mstform.setOriginValue(JSON.stringify(mstform.getForm().getValues()))
			}
		});

		");
            
            #line 844 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < AllGrids.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t");
            
            #line 845 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t//");
            
            #line 846 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid明细，树grid\r\n\t\t\t\t//来自任务分解查看原汇总信息\r\n\t\t\t\t");
            
            #line 848 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write(@"grid.addListener('load', function (me, node, records, successful, eOpts) {
					if (node.childNodes.length > 0) {
						Ext.Array.each(node.childNodes, function (childNode) {
							gridLoadSet(childNode, otype);
						});
						otype = otypeori;
						");
            
            #line 854 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.expandAll();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (BusType == \'2\') {\r\n\t\t\t\t\t");
            
            #line 858 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.loadByUrl(C_ROOT + \'");
            
            #line 858 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 858 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/Get");
            
            #line 858 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("List?istreegrid=1&bustype=2&id=\' + busid + \"&ids=\" + IDs + \'&phidwork=\' + PhidWor" +
                    "k);\r\n\t\t\t\t}\r\n\t\t\t\telse {\t\t\t\t\t\r\n\t\t\t\t\t");
            
            #line 861 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.load();\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t");
            
            #line 863 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\r\n\t\t\t\t//");
            
            #line 864 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid明细\r\n\t\t\t\t//来自任务分解查看原汇总信息\r\n\t\t\t\tif (BusType == \'2\') {\r\n\t\t\t\t\tExt.apply(");
            
            #line 867 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.proxy.extraParams, { \'id\': busid, \'bustype\': 2, \'ids\': IDs, \'phidwork\': Phi" +
                    "dWork });\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tExt.apply(");
            
            #line 870 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.proxy.extraParams, { \'id\': busid });\r\n\t\t\t\t}\r\n\r\n\t\t\t\t");
            
            #line 873 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.cachePageData = false;\r\n\t\t\t\t");
            
            #line 874 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.load(function (records, operation, success) {\r\n\t\t\t\t\tif (records.length > 0)" +
                    " {\r\n\t\t\t\t\t\tExt.Array.each(records, function (rd) {\r\n\t\t\t\t\t\t\tgridLoadSet(rd, otype)" +
                    ";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\totype = otypeori;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t");
            
            #line 882 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.cachePageData = true;\r\n\t\t\t");
            
            #line 883 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\r\n\t\t");
            
            #line 884 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t$CreateFloatMenu(\'");
            
            #line 886 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\');\r\n\r\n\t\t");
            
            #line 888 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasAsrGrid == "1") { 
            
            #line default
            #line hidden
            this.Write(" \r\n\t\tasrgridstore.load({ params: { \"tablename\": \'");
            
            #line 889 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\', \'asr_code\': Ext.getCmp(\'phid\').getValue() } });\r\n\t\t");
            
            #line 890 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t}\r\n\r\n\t//当新增时\r\n    if (otype == $Otype.ADD) {\r\n\t\t");
            
            #line 895 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
    if (Expressions.ContainsValue("AddInit")) { 
            
            #line default
            #line hidden
            this.Write("\t\t");
            
            #line 896 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t\t");
            
            #line 897 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            if (item.Value == "AddInit") { 
            
            #line default
            #line hidden
            this.Write("\t\t");
            
            #line 898 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t");
            
            #line 899 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            }}} 
            
            #line default
            #line hidden
            this.Write(@" 

		if (Ext.getCmp('bill_dt')) {
			Ext.getCmp('bill_dt').setValue(CurDate);
		}
		if (Ext.getCmp('bill_no')) {
		    Ext.getCmp('bill_no').setValue(billno);
		}
		if (Ext.getCmp('fillpsn')) {
			Ext.getCmp('fillpsn').setValue($appinfo.userID);
		}
		
		if (Ext.getCmp('ocode')) {
			if (!Ext.isEmpty(TreeOrgId)) {
				Ext.getCmp('ocode').setValue(TreeOrgId);
			}
			else {
				Ext.getCmp('ocode').setValue($appinfo.orgID);
			}
		}

		if (Ext.getCmp('pc')) {
			if (!Ext.isEmpty(TreeProjId) && Ext.isEmpty(Ext.getCmp('pc').getValue())) {
				Ext.getCmp('pc').setValue(TreeProjId);
			}
		}

		if (Ext.getCmp('s_task_wf')) {
			Ext.getCmp('s_task_wf').setValue(PhidWork);
		}
		if (Ext.getCmp('s_task_node')) {
			Ext.getCmp('s_task_node').setValue(PhidWorkNode);
		}
		if (Ext.getCmp('s_task_phid')) {
			Ext.getCmp('s_task_phid').setValue(PhidTemplate);
		}

		");
            
            #line 936 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.BatchBindCombox(tableLayouts, fieldSets)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t\r\n\t\t");
            
            #line 938 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasBlobdoc != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t//取得金格控件内容\r\n\t\tGetBlobDoc(\'add\');\r\n\t\t");
            
            #line 941 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
		//保存form初始值
        mstform.setOriginValue(JSON.stringify(mstform.getForm().getValues()));

		//mstform新增初始数据赋值完成后执行
        mstform.fireEvent('dataready');
    }
	
	//部分字段始终只读
	if (Ext.getCmp('bill_dt')) {
		Ext.getCmp('bill_dt').userSetReadOnly(true);
	}
	if (Ext.getCmp('bill_no')) {
		Ext.getCmp('bill_no').userSetReadOnly(true);
	}
	if (Ext.getCmp('fillpsn')) {
		Ext.getCmp('fillpsn').userSetReadOnly(true);
	}
	if (Ext.getCmp('checkpsn')) {
		Ext.getCmp('checkpsn').userSetReadOnly(true);
	}
	if (Ext.getCmp('ischeck')) {
		Ext.getCmp('ischeck').userSetReadOnly(true);
	}
	if (Ext.getCmp('check_dt')) {
		Ext.getCmp('check_dt').userSetReadOnly(true);
	}

	//当不存在grid时
	if (");
            
            #line 971 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames.Count));
            
            #line default
            #line hidden
            this.Write(@" == 0 ){
		if (ngToolbar.get('addrow')) {
            ngToolbar.get('addrow').hide();
        }
        if (ngToolbar.get('deleterow')) {
            ngToolbar.get('deleterow').hide();
        }
		if (ngToolbar.get('import')) {
            ngToolbar.get('import').hide();
        }
	}
	else {
        var tab = tabPanel0.getActiveTab();
        if (tab.id.indexOf(""grid"") >= 0) {
            curGrid = tab;
            curStore = tab.store;
        }
		setButtonStatus(curGrid);
    }          

");
            
            #line 991 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("addrow") || Toolbar.RNgButtons.Contains("addrow")) { 
            
            #line default
            #line hidden
            this.Write("    //增行\r\n    ngToolbar.get(\'addrow\').on(\'click\', function () {\r\n\t\t  var data = c" +
                    "urGrid.getSelectionModel();\r\n        curStore.insert(curStore.getCount(), data);" +
                    "\r\n    });\r\n");
            
            #line 997 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 999 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("deleterow") || Toolbar.RNgButtons.Contains("deleterow")) { 
            
            #line default
            #line hidden
            this.Write(@"    //删行
    ngToolbar.get('deleterow').on('click', function () {
		var data = curGrid.getSelectionModel().getSelection();
        if (data.length > 0) {
            var index = curStore.indexOf(data[0]);
            
            Ext.Array.each(data, function (record) {
                curStore.remove(record); //前端删除
            });

            if (curStore.getCount() > 0) {
                if (index >= curStore.getCount()) {
                    index--;
                }
                curGrid.getSelectionModel().select(index);
            }
        }
    });
");
            
            #line 1018 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1020 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
    if (Expressions.ContainsValue("BeforeSave") ) { 
            
            #line default
            #line hidden
            
            #line 1021 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
        int count= 1; 
            
            #line default
            #line hidden
            
            #line 1022 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            
            #line 1023 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            if (item.Value == "BeforeSave") { 
            
            #line default
            #line hidden
            this.Write("                    function Validate");
            
            #line 1024 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(count));
            
            #line default
            #line hidden
            this.Write("() {\r\n");
            
            #line 1025 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
                    count++;      
            
            #line default
            #line hidden
            
            #line 1026 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n                    };\r\n");
            
            #line 1028 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
        }} 
            
            #line default
            #line hidden
            
            #line 1029 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
    }
            
            #line default
            #line hidden
            this.Write("\r\n\t//保存函数\r\n\tfunction Save(callback) {\r\n\t\tvar vt = mstform.isValid();\r\n\t\tif (!vt) " +
                    "{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t");
            
            #line 1038 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\tvt = ");
            
            #line 1039 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.isValid();\r\n\t\tif (!vt) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t");
            
            #line 1043 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t//保存前检测函数\r\n\t\tif (typeof beforeSaveEdit === \"function\") {\r\n\t\t\tif (!beforeSaveE" +
                    "dit()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t");
            
            #line 1052 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
  if (Expressions.ContainsValue("BeforeSave")) { 
            
            #line default
            #line hidden
            this.Write(" \r\n\t");
            
            #line 1053 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
    int count= 1; 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1054 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
    foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1055 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
      if (item.Value == "BeforeSave"){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tif (!Validate");
            
            #line 1056 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(count));
            
            #line default
            #line hidden
            this.Write("())\r\n\t\t\t\treturn;\r\n\t");
            
            #line 1058 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
          count++; 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1059 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
  }}} 
            
            #line default
            #line hidden
            this.Write("\t\t\r\n\t\r\n\t");
            
            #line 1062 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasBlobdoc != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t//金格控件保存\r\n\t\tif (window.frames[\'webofficeiframe\']) {\r\n\t\t");
            
            #line 1065 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (HasBlobdoc == "2") { 
            
            #line default
            #line hidden
            this.Write("\t\t\ttabPanel0.setActiveTab(");
            
            #line 1066 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FieldSetBlobdoc.Region));
            
            #line default
            #line hidden
            this.Write(");\r\n\t\t");
            
            #line 1067 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tvar res = window.frames[\'webofficeiframe\'].SaveDocument();\r\n\t\t\tif (!res || res" +
                    " == \'\' || res == \'0\') {\r\n\t\t\t\tExt.MessageBox.alert(\'提示\', \'金格保存失败！\');\r\n\t\t\t\treturn;" +
                    "\r\n\t\t\t}\r\n\r\n\t\t\tExt.getCmp(\'blobdocid\').setValue(res);            \r\n\t\t}\r\n\t");
            
            #line 1076 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\tvar formData = mstform.getFormData();\r\n\r\n\t");
            
            #line 1080 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\tvar ");
            
            #line 1081 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("Data = ");
            
            #line 1081 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.getChange();\r\n\t");
            
            #line 1082 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 1084 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Expressions.ContainsValue("SaveUpdate") ) { 
            
            #line default
            #line hidden
            this.Write(" \r\n\t\tvar sqlstr=\"\";\r\n\t\tvar execstr=\"\";\r\n\t");
            
            #line 1087 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1088 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            if (item.Value == "SaveUpdate") { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1089 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 1090 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 }}} 
            
            #line default
            #line hidden
            this.Write("\r\n\t\tExt.Ajax.request({\r\n\t\t\tparams: {\r\n\t\t\t\t\'formData\': formData\r\n\t\t\t\t,\'phidtemplat" +
                    "e\': PhidTemplate\r\n\t\t\t");
            
            #line 1096 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("   \r\n\t\t\t\t,\'");
            
            #line 1097 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("Data\':");
            
            #line 1097 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("Data\r\n\t\t\t");
            
            #line 1098 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t,\'extendParam\': typeof getSaveDataEdit === \"function\" ? getSaveDataEdit(\'Save" +
                    "\') : \'\'  //获取需保存数据\r\n\t\t\t");
            
            #line 1100 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Expressions.ContainsValue("SaveUpdate") ) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t,\'sql\': sqlstr\r\n\t\t\t\t,\'exec\': execstr\r\n\t\t\t");
            
            #line 1103 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("  \r\n\t\t\t},\r\n\t\t\turl: C_ROOT + \'");
            
            #line 1105 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1105 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"Edit/save',
			async: false, //同步请求
			success: function (response) {
				if (Ext.isEmpty(response.responseText)) {
                    Ext.MessageBox.alert('提示', '保存失败，服务端发生异常');
                    return;
                }

				var resp = Ext.JSON.decode(response.responseText);
				if (resp.Status === ""OK"") {
					//工作流界面点提交或保存
                    if (WorkFlowInfo.wfotype) {
                        if (callback != '') {  //提交
                            callback();
                        }
                        else {  //保存
                            Ext.MessageBox.alert('提示', ""保存成功"");
                        }
                    }
                    else {
                        Ext.MessageBox.alert('提示', ""保存成功"", function () {
                            //重刷编辑窗口
							var url = C_ROOT + '");
            
            #line 1127 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1127 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit?otype=edit&id=\' + resp.id + \'&appTitle=");
            
            #line 1127 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("-修改\';\r\n\r\n\t\t\t\t\t\t");
            
            #line 1129 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if(HasBlobdoc != "0" || HasReport != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t\turl += \'&ie=1\';\r\n\t\t\t\t\t\t");
            
            #line 1131 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
							//是任务分解模板
                            if (!Ext.isEmpty(PhidTemplate)) {
                                url += '&phidtemplate=' + PhidTemplate;
                            }

                            window.location.href = url;

                            //刷新列表
                            if (typeof window.external.RefreshWebListPage === ""function"") {
                                window.external.RefreshWebListPage();
                            } else {
                                var frame = $GetWFrame();
                                if (frame) {
                                    var listref = frame.ListObserver.get(eform);
                                    if (listref) {
                                        listref.fireEvent('refreshlist');
                                    }
                                }
                            }
                        });
                    }
				} else {
					Ext.MessageBox.alert('提示', '保存失败');
				}
			}
		});
	}

");
            
            #line 1161 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("save") || Toolbar.RNgButtons.Contains("save")) { 
            
            #line default
            #line hidden
            this.Write(@"	//保存
	ngToolbar.get('save').on('click', function () {
		if (isForbidSave)
		{
			return;
		}
		//设置禁止保存变量，并且保存按钮暂时置灰
		isForbidSave = true;
		ngToolbar.get('save').disable();
		Save('');
		isForbidSave = false;
		ngToolbar.get('save').enable();
	});
");
            
            #line 1175 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
    //审核
	if (ngToolbar.get('verify')) {
		ngToolbar.get('verify').on('click', function () {
			if (isModifyed()) {
				Ext.MessageBox.alert('提示', '单据已修改，请先保存');
				return;
			}

			var operate = ngToolbar.get('verify').text;

			if (Ext.getCmp('ischeck').getValue() == '1') {
                Ext.MessageBox.alert('提示', '该单据已审核，不能重复审核!');
                return;
            }

			//审核前检测函数
			if (typeof beforeVerifyEdit === ""function"") {
				if (!beforeVerifyEdit()) {
					return;
				}
			}

			var paramvalue = C_ROOT + '");
            
            #line 1199 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1199 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"Edit?otype=view&id=' + busid + '&ie=1&isapplycheck=1*web';
			var receiverid = Ext.getCmp('checkpsn').getValue();
		
			Ext.Ajax.request({
				params: {
					'id': busid,
					'isapplycheck': IsApplyCheck,
					'paramvalue': paramvalue,
					'receiverid': receiverid,
					'extendParam': typeof getSaveDataEdit === ""function"" ? getSaveDataEdit('Verify') : ''  //获取需保存数据
				},
				url: C_ROOT + '");
            
            #line 1210 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1210 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"List/Verify',
				async: false, //同步请求
				success: function (response) {
					var resp = Ext.JSON.decode(response.responseText);
					if (resp.status === ""OK"") {
						//审核成功
						if (Ext.getCmp('ischeck')) {
							Ext.getCmp('ischeck').setValue(1);
						}
						if (Ext.getCmp('check_dt')) {
							Ext.getCmp('check_dt').setValue(CurDate);
						}
						if (Ext.getCmp('checkpsn')) {
							Ext.getCmp('checkpsn').setValue($appinfo.userID);
							var codectl = [];
							codectl.push(Ext.getCmp('checkpsn'));
							BatchBindCombox(codectl);
						}

						//ngToolbar.get('unverify').enable();
						//ngToolbar.get('verify').disable();

						//界面只读
						if (ngToolbar.get('addrow')) {
							ngToolbar.get('addrow').disable();
						}
						if (ngToolbar.get('deleterow')) {
							ngToolbar.get('deleterow').disable();
						}
						if (ngToolbar.get('save')) {
							ngToolbar.get('save').disable();
						}
						otype = 'view';
						mstform.setFormReadOnly(true);
						");
            
            #line 1244 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t\t");
            
            #line 1245 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.setGridReadOnly(true);\r\n\t\t\t\t\t\t");
            
            #line 1246 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
						//form原始值更新
						mstform.OriginValue = JSON.stringify(mstform.getForm().getValues());

						Ext.MessageBox.alert('提示', operate + ""成功!"", function () {
							if (typeof window.external.RefreshWebListPage === ""function"") {
								window.external.RefreshWebListPage();
							} else {
                				var frame = $GetWFrame();
                				if (frame) {
                    				var listref = frame.ListObserver.get(eform);
                    				if (listref) {
                        				listref.fireEvent('refreshlist');
                    				}
                				}
            				}
						});
					} else {
						Ext.MessageBox.alert( '提示', operate + ""失败!"");
					}
				}
			});
		});
	}

	//去审核
	if (ngToolbar.get('unverify')) {
		ngToolbar.get('unverify').on('click', function () {
			if (isModifyed()) {
				Ext.MessageBox.alert('提示', '单据已修改，请先保存');
				return;
			}

			var operate = ngToolbar.get('unverify').text;		

			if (Ext.getCmp('ischeck').getValue() != '1') {
                Ext.MessageBox.alert('提示', '该单据未审核，不能重复去审!');
                return;
            }

			//审核/去审核前检测函数
			if (typeof beforeUnVerifyEdit === ""function"") {
				if (!beforeUnVerifyEdit()) {
					return;
				}
			}

			var paramvalue = C_ROOT + '");
            
            #line 1294 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1294 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"Edit?otype=view&id=' + busid + '&ie=1&isapplycheck=1*web';
			var receiverid = Ext.getCmp('checkpsn').getValue();
		
			Ext.Ajax.request({
				params: {
					'id': busid,
					'isapplycheck': IsApplyCheck,
					'paramvalue': paramvalue,
					'receiverid': receiverid,
					'extendParam': typeof getSaveDataEdit === ""function"" ? getSaveDataEdit('UnVerify') : ''  //获取需保存数据
				},
				url: C_ROOT + '");
            
            #line 1305 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1305 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("List/Verify\',\r\n\t\t\t\tasync: false, //同步请求\r\n\t\t\t\tsuccess: function (response) {\r\n\t\t\t\t" +
                    "\tvar resp = Ext.JSON.decode(response.responseText);\r\n\t\t\t\t\tif (resp.status === \"O" +
                    "K\") {\t\t\t\t\r\n\t\t\t\t\t\t//去审核成功\r\n\t\t\t\t\t\t//申请去审打开时去审核后直接关闭窗口\r\n\t\t\t\t\t\tif (IsApplyCheck == \'" +
                    "1\') {\r\n\t\t\t\t\t\t\tExt.MessageBox.alert(\'提示\', operate + \"成功!\", function () {\r\n\t\t\t\t\t\t\t" +
                    "\tif (typeof window.external.RefreshWebListPage === \"function\") {\r\n\t\t\t\t\t\t\t\t\twindo" +
                    "w.external.RefreshWebListPage();\r\n\t\t\t\t\t\t\t\t} else {\r\n                \t\t\t\t\tvar fra" +
                    "me = $GetWFrame();\r\n                \t\t\t\t\tif (frame) {\r\n                    \t\t\t\t\t" +
                    "var listref = frame.ListObserver.get(eform);\r\n                    \t\t\t\t\tif (listr" +
                    "ef) {\r\n                        \t\t\t\t\tlistref.fireEvent(\'refreshlist\');\r\n         " +
                    "          \t\t\t \t\t\t}\r\n                \t\t\t\t\t}\r\n            \t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$CloseTa" +
                    "b();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (Ext.getCmp(\'ischeck\')) {\r" +
                    "\n\t\t\t\t\t\t\tExt.getCmp(\'ischeck\').setValue(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'check" +
                    "_dt\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'check_dt\').setValue(null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext." +
                    "getCmp(\'checkpsn\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'checkpsn\').setValue(null);\r\n\t\t\t\t\t\t}\r\n\r" +
                    "\n\t\t\t\t\t\t//ngToolbar.get(\'verify\').enable();\r\n\t\t\t\t\t\t//ngToolbar.get(\'unverify\').di" +
                    "sable();\r\n\r\n\t\t\t\t\t\t//界面去只读\r\n\t\t\t\t\t\tif (ngToolbar.get(\'addrow\')) {\r\n\t\t\t\t\t\t\tngToolba" +
                    "r.get(\'addrow\').enable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ngToolbar.get(\'deleterow\')) {\r\n\t\t\t" +
                    "\t\t\t\tngToolbar.get(\'deleterow\').enable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ngToolbar.get(\'save" +
                    "\')) {\r\n\t\t\t\t\t\t\tngToolbar.get(\'save\').enable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\totype = \'edit\';\r\n\t" +
                    "\t\t\t\t\tmstform.setFormReadOnly(false);\r\n\t\t\t\t\t\t");
            
            #line 1355 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t\t");
            
            #line 1356 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.setGridReadOnly(false);\r\n\t\t\t\t\t\t");
            
            #line 1357 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
						//form原始值更新
						mstform.OriginValue = JSON.stringify(mstform.getForm().getValues());

						Ext.MessageBox.alert('提示', operate + ""成功!"", function () {
							if (typeof window.external.RefreshWebListPage === ""function"") {
								window.external.RefreshWebListPage();
							} else {
                				var frame = $GetWFrame();
                				if (frame) {
                    				var listref = frame.ListObserver.get(eform);
                    				if (listref) {
                        				listref.fireEvent('refreshlist');
                    				}
                				}
            				}
						});
					} else {
						Ext.MessageBox.alert( '提示', operate + ""失败!"");
					}
				}
			});
		});
	}

");
            
            #line 1383 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("check") || Toolbar.RNgButtons.Contains("check")) { 
            
            #line default
            #line hidden
            this.Write("    //送审\r\n    ngToolbar.get(\'check\').on(\'click\',function(){\r\n\t\tif (isModifyed()) " +
                    "{\r\n            Ext.MessageBox.alert(\'提示\', \'单据已修改，请先保存\');\r\n            return;\r\n " +
                    "       }\r\n\r\n\t\t$WorkFlow.startFlow(\'");
            
            #line 1391 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write(@"', busid, function () {
			if (Ext.getCmp('is_wf')) {
				Ext.getCmp('is_wf').setValue('1'); 
			}

			//界面只读
			if (ngToolbar.get('addrow')) {
                ngToolbar.get('addrow').disable();
            }
            if (ngToolbar.get('deleterow')) {
                ngToolbar.get('deleterow').disable();
            }
			if (ngToolbar.get('import')) {
                ngToolbar.get('import').disable();
            }
			if (ngToolbar.get('save')) {
                ngToolbar.get('save').disable();
            }
			otype = 'view';
            mstform.setFormReadOnly(true);
			");
            
            #line 1411 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t");
            
            #line 1412 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.setGridReadOnly(true);\r\n\t\t\t");
            
            #line 1413 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
			//form原始值更新
			mstform.OriginValue = JSON.stringify(mstform.getForm().getValues());

			if (typeof window.external.RefreshWebListPage === ""function"") {
				window.external.RefreshWebListPage();
			} else {
                var frame = $GetWFrame();
                if (frame) {
                    var listref = frame.ListObserver.get(eform);
                    if (listref) {
                        listref.fireEvent('refreshlist');
                    }
                }
            }
		});
	});
");
            
            #line 1431 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1433 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("history") || Toolbar.RNgButtons.Contains("history")) { 
            
            #line default
            #line hidden
            this.Write("\t//送审追踪\r\n\tngToolbar.get(\'history\').on(\'click\',function(){ \r\n\t\t$WorkFlow.showFlowI" +
                    "nfo(\'");
            
            #line 1436 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\', busid);\r\n\t});\r\n");
            
            #line 1438 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1440 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("applycheck") || Toolbar.RNgButtons.Contains("applycheck")) { 
            
            #line default
            #line hidden
            this.Write(@"	//申请去审
	ngToolbar.get('applycheck').on('click',function(){ 
	    if (!Ext.getCmp('ocode')) {
            Ext.MessageBox.alert('提示', ""[设计问题]表头没有组织列"");
            return;
        }
        if (!Ext.getCmp('checkpsn')) {
            Ext.MessageBox.alert('提示', ""[设计问题]表头没有审核人列"");
            return;
        }

        var chkflg = Ext.getCmp('ischeck').getValue();
        if (chkflg != ""1"") {
            Ext.MessageBox.alert('提示', '该单据未审核，不能申请去审!');
            return;
        }

		var billno = Ext.getCmp('bill_no').getValue();
        var busTitle = '");
            
            #line 1459 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("\';\r\n        var ocode = Ext.getCmp(\'ocode\').getValue();\r\n        var receiverid =" +
                    " Ext.getCmp(\'checkpsn\').getValue();\r\n\t\tvar receivername = Ext.getCmp(\'checkpsn\')" +
                    ".getRawValue();\r\n\t\tvar url = C_ROOT + \'");
            
            #line 1463 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1463 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"Edit?otype=view&id=' + busid + '&ie=1&isapplycheck=1*web';

        Ext.Ajax.request({
            params: {
                id: busid,
				billno: billno,
				busTitle: busTitle,
				ocode: ocode,
                receiverid: receiverid,
				receivername: receivername,
                urlLink: url
            },
            url: C_ROOT + 'SUP/CustomCommon/ApplyCheckParam',
            async: false, //同步请求
            success: function (response) {
                var ret = response.responseText;
                var url = C_ROOT + 'SUP/ApplyCheck/ApplyCheck?params=' + ret;
                $OpenTab(busTitle + '-申请去审', url);
            }
        });
	});
");
            
            #line 1484 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1486 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("import") || Toolbar.RNgButtons.Contains("import")) { 
            
            #line default
            #line hidden
            this.Write("\t//导入\r\n    ngToolbar.get(\'import\').on(\'click\', function () {\r\n\t\tif (Ext.isEmpty(c" +
                    "urGrid)) {\r\n            Ext.MessageBox.alert(\'提示\', \"请先选中grid\");\r\n            ret" +
                    "urn;\r\n        }\r\n\t\t\r\n        Ext.create(\'Ext.Gc.ExcelImport\', {\r\n            bus" +
                    "iType: eform,\r\n            busiGrid: curGrid,\r\n\t\t\tiseform: true,\r\n            be" +
                    "foreCreate: function (columndata) {\r\n\t\t\t    var dataIndexs = [];\r\n\t\t\t    Ext.Arr" +
                    "ay.each(columndata, function (col) {\r\n\t\t\t        Ext.Array.include(dataIndexs, c" +
                    "ol.dataIndex);\r\n\t\t\t    });\r\n\r\n\t\t\t    Ext.Array.each(columndata, function (col) {" +
                    "\r\n\t\t\t\t    if (col.dataIndex == \'c_name\') {\r\n\t\t\t\t        col.helpId = \'itemdata|i" +
                    "temid\';\r\n\t\t\t\t    } else if (col.dataIndex == \'pc_name\') {\r\n\t\t\t\t        col.helpI" +
                    "d = \'pms3.project_table|pc\';\r\n\t\t\t\t    } else if (col.dataIndex == \'custno_name\')" +
                    " {\r\n\t\t\t\t        col.helpId = \'fg3_enterprise|custno\';\r\n\t\t\t\t    } else if (col.da" +
                    "taIndex == \'vendor_id_name\') {\r\n\t\t\t\t        col.helpId = \'fg3_enterprise|vendor_" +
                    "id\';\r\n\t\t\t\t    } else if (col.dataIndex == \'manufacturer_id_name\') {\r\n\t\t\t\t       " +
                    " col.helpId = \'fg3_enterprise|manufacturer_id\';\r\n\t\t\t\t    } else if (col.dataInde" +
                    "x == \'cbsid_name\') {\r\n\t\t\t\t        col.helpId = \'pms3.bd_cbs|cbsid\';\r\n\t\t\t\t    } e" +
                    "lse if (col.dataIndex == \'org_id_name\') {\r\n\t\t\t\t        col.helpId = \'fg3_enterpr" +
                    "ise|org_id\';\r\n\t\t\t\t    } else if (col.dataIndex == \'empid_name\') {\r\n\t\t\t\t        c" +
                    "ol.helpId = \'hr3.hr_epm_main|empid\';\r\n\t\t\t\t    } else if (col.dataIndex == \'wbsco" +
                    "de_name\') {\r\n\t\t\t\t        col.helpId = \'pmm3.bd_wbs|wbscode\';\r\n\t\t\t\t    } else if " +
                    "(col.dataIndex == \'forwarder_id_name\') {\r\n\t\t\t\t        col.helpId = \'fg3_enterpri" +
                    "se|forwarder_id\';\r\n\t\t\t\t    } else if (col.dataIndex == \'deptid_name\') {\r\n\t\t\t\t   " +
                    "     col.helpId = \'fg_orglist|deptid\';\r\n\t\t\t\t    } else {\r\n\t\t\t            if (col" +
                    ".dataIndex.indexOf(\'_name\') > -1) {\r\n\t\t\t                var temp = col.dataIndex" +
                    ".replace(\'_name\', \'\');\r\n\t\t\t                if (Ext.Array.contains(dataIndexs, te" +
                    "mp)) {\r\n\t\t\t                    Ext.Array.each(curGrid.columns, function (gridcol" +
                    ") {\r\n\t\t\t\t\t\t\t        if (gridcol.items.length > 0) {\r\n\t\t\t\t\t\t\t\t        Ext.Array.e" +
                    "ach(gridcol.items.items, function (griditemscol) {\r\n\t\t\t\t\t\t\t\t\t        if (gridite" +
                    "mscol.dataIndex == col.dataIndex) {\r\n\t\t\t                                    if (" +
                    "griditemscol.helpid != undefined) {\r\n\t\t\t                                        " +
                    "col.helpId = griditemscol.helpid + \'|\' + temp;\r\n\t\t\t                             " +
                    "       } else if (griditemscol.editor != undefined && griditemscol.editor.helpid" +
                    " != undefined) {\r\n\t\t\t                                        col.helpId = gridit" +
                    "emscol.editor.helpid + \'|\' + temp;\r\n\t\t\t                                    }\r\n\t\t" +
                    "\t                                }\r\n\t\t\t\t\t\t\t\t        })\r\n\t\t\t\t\t\t\t        } else {\r" +
                    "\n\t\t\t                            if (gridcol.dataIndex == col.dataIndex) {\r\n\t\t\t  " +
                    "                              if (gridcol.helpid != undefined) {\r\n\t\t\t           " +
                    "                         col.helpId = gridcol.helpid + \'|\' + temp;\r\n\t\t\t         " +
                    "                       } else if (gridcol.editor != undefined && gridcol.editor." +
                    "helpid != undefined) {\r\n\t\t\t                                    col.helpId = grid" +
                    "col.editor.helpid + \'|\' + temp;\r\n\t\t\t                                }\r\n\t\t\t      " +
                    "                      }\r\n\t\t\t                        }\r\n\t\t\t                    })" +
                    "\r\n\t\t\t                }\r\n\t\t\t\t\t    }\r\n\t\t\t\t    }\r\n\t\t\t    })\r\n            },\r\n      " +
                    "      listeners: {\r\n                \'helpselected\': function (obj) {\r\n          " +
                    "          var msgbox = Ext.Msg.show({\r\n                        title: \'正在导入Excel" +
                    "数据\',\r\n\t\t\t\t\t    width: 350,\r\n\t\t\t\t\t    model: true,\r\n\t\t\t\t\t    progress: true\r\n\t\t\t\t" +
                    "    });\r\n\r\n                    intervalHandle(0, obj, msgbox);\r\n                " +
                    "}\r\n            }\r\n        }).show();\r\n    });\r\n");
            
            #line 1571 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
    function intervalHandle(i, obj, msgbox) {
        _returnInterval = setInterval(function () {
            clearInterval(_returnInterval);

            if (i != obj.data.length - 1) {
                msgbox.updateProgress(i / obj.data.length, ""正在处理第"" + (i + 1) + ""/"" + obj.data.length + ""行数据"");
            } else {
                msgbox.hide();
            }
        
            var record = obj.data[i].data;
            if (record.hasOwnProperty(""phid_itemdata"") && record.hasOwnProperty(""phid_itemdata"")) {
			    if (record.itemid == ''){
				    record.c_name = '';
				} else {
				    record.phid_itemdata = record.itemid;
				}
            }
            curStore.insert(curStore.getCount(), record);

            if (i < obj.data.length - 1) {
                intervalHandle(i + 1, obj, msgbox)
            }
        }, 1);
    }

");
            
            #line 1599 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("attachment") || Toolbar.RNgButtons.Contains("attachment")) { 
            
            #line default
            #line hidden
            this.Write("\t//附件\r\n\tngToolbar.get(\'attachment\').on(\'click\', function () {\r\n\t\tOpenAttachment(\'" +
                    "form\', \'");
            
            #line 1602 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\');\r\n\t});\r\n");
            
            #line 1604 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1606 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("subbill") || Toolbar.RNgButtons.Contains("subbill")) { 
            
            #line default
            #line hidden
            this.Write(@"	//下达
	ngToolbar.get('subbill').on('click',function(){
		if (isModifyed()) {
            Ext.MessageBox.alert('提示', '单据已修改，请先保存');
            return;
        }

		var phidbill = busid;  //表单主键
        var phidwork = Ext.getCmp('s_task_wf').getValue();  //流程主键

		if (Ext.isEmpty(phidbill) || Ext.isEmpty(phidwork)) {
            Ext.MessageBox.alert('提示', '表单主键和流程主键不能为空');
            return;
        }
		
		$Work.BreakDownNodeAddNext(phidwork, phidbill);
	});
");
            
            #line 1624 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1626 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("ok") || Toolbar.RNgButtons.Contains("ok")) { 
            
            #line default
            #line hidden
            this.Write(@"	//提交
	ngToolbar.get('ok').on('click',function(){
		if (isModifyed()) {
            Ext.MessageBox.alert('提示', '单据已修改，请先保存');
            return;
        }

		var phidbill = busid;  //表单主键
        var phidworknode = Ext.getCmp('s_task_node').getValue();  //节点主键

		if (Ext.isEmpty(phidbill) || Ext.isEmpty(phidworknode)) {
            Ext.MessageBox.alert('提示', '表单主键和节点主键不能为空');
            return;
        }
		
		$Work.BreakDownNodeComplete(phidworknode, phidbill);
	});
");
            
            #line 1644 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1646 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("query") || Toolbar.RNgButtons.Contains("query")) { 
            
            #line default
            #line hidden
            this.Write(@"	//汇总
	ngToolbar.get('query').on('click',function(){
		if (isModifyed()) {
            Ext.MessageBox.alert('提示', '单据已修改，请先保存');
            return;
        }

		var phidwork = Ext.getCmp('s_task_wf').getValue();  //流程主键
		var phidworknode = Ext.getCmp('s_task_node').getValue();  //节点主键

		if (Ext.isEmpty(phidwork) || Ext.isEmpty(phidworknode)) {
			Ext.MessageBox.alert('提示', '流程主键和节点主键不能为空');
			return;
		}

		Ext.Ajax.request({
			params: { 'nodephid': phidworknode },
			async: false,
			url: C_ROOT + 'Work/BreakDown/GetNodeChildBill',
			success: function (response) {
				var data = Ext.JSON.decode(response.responseText);

				if (data.length > 0) {
					var ids = '';
					Ext.Array.each(data, function (rd) {
						if (rd.nodestate != '2') {
                            Ext.MessageBox.alert('提示', '部分下级节点数据未提交，不能汇总');
                            return false;
                        }

						if (!Ext.isEmpty(rd.phidbill)) {
							ids += rd.phidbill + ',';
						}						
					});

					if (ids == '') {
						Ext.MessageBox.alert('提示', '任务中心返回值为空，下级节点数据未提交');
						return false;
					}

					ids = ids.substr(0, ids.length - 1);
			");
            
            #line 1688 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < AllGrids.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t");
            
            #line 1689 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 1690 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.loadByUrl(C_ROOT + \'");
            
            #line 1690 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1690 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/Get");
            
            #line 1690 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("List?istreegrid=1&bustype=1&id=\' + busid + \'&ids=\' + ids + \'&phidwork=\' + phidwor" +
                    "k);\r\n\t\t\t\t");
            
            #line 1691 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\tExt.apply(");
            
            #line 1692 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.proxy.extraParams, { \'id\': busid, \'bustype\': 1, \'ids\': ids, \'phidwork\': phi" +
                    "dwork });\r\n\t\t\t\t\t");
            
            #line 1693 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.cachePageData = false;\r\n\t\t\t\t\t");
            
            #line 1694 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.load();\r\n\t\t\t\t\t");
            
            #line 1695 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.cachePageData = true;\r\n\t\t\t\t");
            
            #line 1696 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t");
            
            #line 1697 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t} else {\r\n\t\t\t\t\tExt.MessageBox.alert(\'提示\', \'没有可汇总下级节点数据\');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});" +
                    "\t\t\t\r\n\t});\r\n");
            
            #line 1704 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1706 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("deal") || Toolbar.RNgButtons.Contains("deal")) { 
            
            #line default
            #line hidden
            this.Write(@"	//原汇总信息
	ngToolbar.get('deal').on('click',function(){
		var phidwork = Ext.getCmp('s_task_wf').getValue();  //流程主键
		var phidworknode = Ext.getCmp('s_task_node').getValue();  //节点主键

		if (Ext.isEmpty(phidwork) || Ext.isEmpty(phidworknode)) {
			Ext.MessageBox.alert('提示', '流程主键和节点主键不能为空');
			return;
		}

		Ext.Ajax.request({
			params: { 'nodephid': phidworknode },
			async: false,
			url: C_ROOT + 'Work/BreakDown/GetNodeChildBill',
			success: function (response) {
				var data = Ext.JSON.decode(response.responseText);

				if (data.length > 0) {
					var ids = '';
					Ext.Array.each(data, function (rd) {
						if (!Ext.isEmpty(rd.phidbill)) {
							ids += rd.phidbill + ',';
						}						
					});

					if (ids == '') {
						Ext.MessageBox.alert('提示', '任务中心返回值为空，下级节点数据未提交');
						return;
					}

					ids = ids.substr(0, ids.length - 1);

					var url = C_ROOT + '");
            
            #line 1739 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1739 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit?otype=view&bustype=2&id=\' + busid + \'&ids=\' + ids + \'&phidwork=\' + phidwork;" +
                    "\r\n\t\t\t\t\t");
            
            #line 1740 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if(HasBlobdoc != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\turl += \'&ie=1\';\r\n\t\t\t\t\t");
            
            #line 1742 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t$OpenTab(\'");
            
            #line 1743 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("-原汇总信息\', url);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tExt.MessageBox.alert(\'提示\', \'没有可汇总下级节点数据\');\r\n\t\t" +
                    "\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n");
            
            #line 1750 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1752 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("print")||Toolbar.RNgButtons.Contains("print")) { 
            
            #line default
            #line hidden
            this.Write("    //打印\r\n    ngToolbar.get(\'print\').on(\'click\', function () {\r\n\r\n\t\t");
            
            #line 1756 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (PanelNames.Count == 0){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t$PrintHelp(\"");
            
            #line 1757 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("\", \'");
            
            #line 1757 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\', mstform, [], [\"");
            
            #line 1757 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("\"]);\r\n\t\t");
            
            #line 1758 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
  }else { 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\tvar grids = [ ");
            
            #line 1760 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("   \r\n\t\t\t\t");
            
            #line 1761 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (i == PanelNames.Count-1){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 1762 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid ];\r\n\t\t\t\t");
            
            #line 1763 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 }else{ 
            
            #line default
            #line hidden
            this.Write(" \r\n\t\t\t\t\t");
            
            #line 1764 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid, \r\n\t\t\t\t");
            
            #line 1765 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t");
            
            #line 1766 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t$PrintHelp(\"");
            
            #line 1768 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("\", \'");
            
            #line 1768 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\', mstform, grids, [\"");
            
            #line 1768 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("\"]);\r\n\t\t");
            
            #line 1769 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
  } 
            
            #line default
            #line hidden
            this.Write("\t});\r\n");
            
            #line 1771 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1773 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 if (Toolbar.LNgButtons.Contains("close") || Toolbar.RNgButtons.Contains("close")) { 
            
            #line default
            #line hidden
            this.Write(@"	//关闭
	ngToolbar.get('close').addListener('beforeclose', function () {
        //查看窗口直接关闭
        if (otype == $Otype.VIEW) {
            return true;
        }

        if (isModifyed()) {
            Ext.MessageBox.confirm('提示', '单据未保存，确定关闭？', function (e) {
                if (e == ""yes"") {
                    $CloseTab();
                }
            });
            return false;
        }
        else {
            return true;
        }
    });
");
            
            #line 1793 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t//判断表单是否已编辑\r\n    function isModifyed() {\r\n        if (mstform.hasModifyed() ");
            
            #line 1797 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write(" || ");
            
            #line 1797 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.hasModifyed() ");
            
            #line 1797 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsWithTabTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@" ) {
            return true;
        }
        else {
            return false;
        }
    }

	tabPanel0.on('tabchange', function (tabPanel, newCard, oldCard, eOpts) {
		if (newCard.id.indexOf(""grid"") >= 0) {
            curGrid = newCard;
            curStore = newCard.store;
			setButtonStatus(curGrid);
        }
    });

	//布局后初始化函数
    if (typeof allReadyEdit === ""function"") {
        allReadyEdit();
    }
});");
            return this.GenerationEnvironment.ToString();
        }
    }
    
    #line default
    #line hidden
    #region Base class
    /// <summary>
    /// Base class for this transformation
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "14.0.0.0")]
    public class PageEditJsWithTabTemplateBase
    {
        #region Fields
        private global::System.Text.StringBuilder generationEnvironmentField;
        private global::System.CodeDom.Compiler.CompilerErrorCollection errorsField;
        private global::System.Collections.Generic.List<int> indentLengthsField;
        private string currentIndentField = "";
        private bool endsWithNewline;
        private global::System.Collections.Generic.IDictionary<string, object> sessionField;
        #endregion
        #region Properties
        /// <summary>
        /// The string builder that generation-time code is using to assemble generated output
        /// </summary>
        protected System.Text.StringBuilder GenerationEnvironment
        {
            get
            {
                if ((this.generationEnvironmentField == null))
                {
                    this.generationEnvironmentField = new global::System.Text.StringBuilder();
                }
                return this.generationEnvironmentField;
            }
            set
            {
                this.generationEnvironmentField = value;
            }
        }
        /// <summary>
        /// The error collection for the generation process
        /// </summary>
        public System.CodeDom.Compiler.CompilerErrorCollection Errors
        {
            get
            {
                if ((this.errorsField == null))
                {
                    this.errorsField = new global::System.CodeDom.Compiler.CompilerErrorCollection();
                }
                return this.errorsField;
            }
        }
        /// <summary>
        /// A list of the lengths of each indent that was added with PushIndent
        /// </summary>
        private System.Collections.Generic.List<int> indentLengths
        {
            get
            {
                if ((this.indentLengthsField == null))
                {
                    this.indentLengthsField = new global::System.Collections.Generic.List<int>();
                }
                return this.indentLengthsField;
            }
        }
        /// <summary>
        /// Gets the current indent we use when adding lines to the output
        /// </summary>
        public string CurrentIndent
        {
            get
            {
                return this.currentIndentField;
            }
        }
        /// <summary>
        /// Current transformation session
        /// </summary>
        public virtual global::System.Collections.Generic.IDictionary<string, object> Session
        {
            get
            {
                return this.sessionField;
            }
            set
            {
                this.sessionField = value;
            }
        }
        #endregion
        #region Transform-time helpers
        /// <summary>
        /// Write text directly into the generated output
        /// </summary>
        public void Write(string textToAppend)
        {
            if (string.IsNullOrEmpty(textToAppend))
            {
                return;
            }
            // If we're starting off, or if the previous text ended with a newline,
            // we have to append the current indent first.
            if (((this.GenerationEnvironment.Length == 0) 
                        || this.endsWithNewline))
            {
                this.GenerationEnvironment.Append(this.currentIndentField);
                this.endsWithNewline = false;
            }
            // Check if the current text ends with a newline
            if (textToAppend.EndsWith(global::System.Environment.NewLine, global::System.StringComparison.CurrentCulture))
            {
                this.endsWithNewline = true;
            }
            // This is an optimization. If the current indent is "", then we don't have to do any
            // of the more complex stuff further down.
            if ((this.currentIndentField.Length == 0))
            {
                this.GenerationEnvironment.Append(textToAppend);
                return;
            }
            // Everywhere there is a newline in the text, add an indent after it
            textToAppend = textToAppend.Replace(global::System.Environment.NewLine, (global::System.Environment.NewLine + this.currentIndentField));
            // If the text ends with a newline, then we should strip off the indent added at the very end
            // because the appropriate indent will be added when the next time Write() is called
            if (this.endsWithNewline)
            {
                this.GenerationEnvironment.Append(textToAppend, 0, (textToAppend.Length - this.currentIndentField.Length));
            }
            else
            {
                this.GenerationEnvironment.Append(textToAppend);
            }
        }
        /// <summary>
        /// Write text directly into the generated output
        /// </summary>
        public void WriteLine(string textToAppend)
        {
            this.Write(textToAppend);
            this.GenerationEnvironment.AppendLine();
            this.endsWithNewline = true;
        }
        /// <summary>
        /// Write formatted text directly into the generated output
        /// </summary>
        public void Write(string format, params object[] args)
        {
            this.Write(string.Format(global::System.Globalization.CultureInfo.CurrentCulture, format, args));
        }
        /// <summary>
        /// Write formatted text directly into the generated output
        /// </summary>
        public void WriteLine(string format, params object[] args)
        {
            this.WriteLine(string.Format(global::System.Globalization.CultureInfo.CurrentCulture, format, args));
        }
        /// <summary>
        /// Raise an error
        /// </summary>
        public void Error(string message)
        {
            System.CodeDom.Compiler.CompilerError error = new global::System.CodeDom.Compiler.CompilerError();
            error.ErrorText = message;
            this.Errors.Add(error);
        }
        /// <summary>
        /// Raise a warning
        /// </summary>
        public void Warning(string message)
        {
            System.CodeDom.Compiler.CompilerError error = new global::System.CodeDom.Compiler.CompilerError();
            error.ErrorText = message;
            error.IsWarning = true;
            this.Errors.Add(error);
        }
        /// <summary>
        /// Increase the indent
        /// </summary>
        public void PushIndent(string indent)
        {
            if ((indent == null))
            {
                throw new global::System.ArgumentNullException("indent");
            }
            this.currentIndentField = (this.currentIndentField + indent);
            this.indentLengths.Add(indent.Length);
        }
        /// <summary>
        /// Remove the last indent that was added with PushIndent
        /// </summary>
        public string PopIndent()
        {
            string returnValue = "";
            if ((this.indentLengths.Count > 0))
            {
                int indentLength = this.indentLengths[(this.indentLengths.Count - 1)];
                this.indentLengths.RemoveAt((this.indentLengths.Count - 1));
                if ((indentLength > 0))
                {
                    returnValue = this.currentIndentField.Substring((this.currentIndentField.Length - indentLength));
                    this.currentIndentField = this.currentIndentField.Remove((this.currentIndentField.Length - indentLength));
                }
            }
            return returnValue;
        }
        /// <summary>
        /// Remove any indentation
        /// </summary>
        public void ClearIndent()
        {
            this.indentLengths.Clear();
            this.currentIndentField = "";
        }
        #endregion
        #region ToString Helpers
        /// <summary>
        /// Utility class to produce culture-oriented representation of an object as a string.
        /// </summary>
        public class ToStringInstanceHelper
        {
            private System.IFormatProvider formatProviderField  = global::System.Globalization.CultureInfo.InvariantCulture;
            /// <summary>
            /// Gets or sets format provider to be used by ToStringWithCulture method.
            /// </summary>
            public System.IFormatProvider FormatProvider
            {
                get
                {
                    return this.formatProviderField ;
                }
                set
                {
                    if ((value != null))
                    {
                        this.formatProviderField  = value;
                    }
                }
            }
            /// <summary>
            /// This is called from the compile/run appdomain to convert objects within an expression block to a string
            /// </summary>
            public string ToStringWithCulture(object objectToConvert)
            {
                if ((objectToConvert == null))
                {
                    throw new global::System.ArgumentNullException("objectToConvert");
                }
                System.Type t = objectToConvert.GetType();
                System.Reflection.MethodInfo method = t.GetMethod("ToString", new System.Type[] {
                            typeof(System.IFormatProvider)});
                if ((method == null))
                {
                    return objectToConvert.ToString();
                }
                else
                {
                    return ((string)(method.Invoke(objectToConvert, new object[] {
                                this.formatProviderField })));
                }
            }
        }
        private ToStringInstanceHelper toStringHelperField = new ToStringInstanceHelper();
        /// <summary>
        /// Helper to produce culture-oriented representation of an object as a string
        /// </summary>
        public ToStringInstanceHelper ToStringHelper
        {
            get
            {
                return this.toStringHelperField;
            }
        }
        #endregion
    }
    #endregion
}
