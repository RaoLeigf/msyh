// ------------------------------------------------------------------------------
// <auto-generated>
//     此代码由工具生成。
//     运行时版本: 14.0.0.0
//  
//     对此文件的更改可能导致不正确的行为，如果
//     重新生成代码，则所做更改将丢失。
// </auto-generated>
// ------------------------------------------------------------------------------
namespace SUP.CustomForm.ClientGen
{
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "14.0.0.0")]
    public partial class PageEditJsTemplate : PageEditJsTemplateBase
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public virtual string TransformText()
        {
            this.Write(@"//------------------------------全局函数------------------------------
//附件接收返回值
function AttachReturnValue(key, value) {
    AttachReturnRefresh(key, value);
}


//------------------------------全局变量------------------------------
//全局变量
Ext.useShims = true;  //帮助显示在最顶层
var attfrom;  //附件打开自form、grid还是list
var blobdocUrl = '';  //金格控件url
var Guid = new GUID();  //用于生成guid
var eform = '");
            
            #line 14 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\';  //工作流等的key \r\nvar busname = \'");
            
            #line 15 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PForm));
            
            #line default
            #line hidden
            this.Write("\';\r\nvar classname = \'");
            
            #line 16 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("\';\r\nvar tablenameM = \'");
            
            #line 17 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\';\r\nvar istask = \'");
            
            #line 18 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(IsTask));
            
            #line default
            #line hidden
            this.Write("\';\r\nvar otypeori = otype;\r\nvar reltable = \'");
            
            #line 20 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Reltable));
            
            #line default
            #line hidden
            this.Write(@"';

var curToolbar;  //当前工具栏
var curForm;  //当前form
var curGrid;  //当前grid
var curStore;  //当前store

var isMultiSelect = false;  //grid是否复选
var isForbidSave = false;  //禁止保存，防止连续点击保存按钮重复请求

//------------------------------onReady------------------------------
Ext.onReady(function () {
	//布局前初始化函数
    if (typeof allInitEdit === ""function"") {
        allInitEdit();
    }

	//虚面板，用于调整某些事件的触发时机
    var virtualPanel = Ext.create('Ext.panel.Panel', {});
    virtualPanel.addEvents('afterViewport');  //viewport建完后触发

	//工具栏
	var toolbarStr;

	if (IsSso == 'true') {
		toolbarStr = ['->', '', 'close'];  //单点登录预览按钮特殊处理
	}
	else {
		toolbarStr = [");
            
            #line 48 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetButtons(Toolbar,"Edit")));
            
            #line default
            #line hidden
            this.Write("];\r\n\t}\r\n\r\n\tvar ngToolbar = Ext.create(\'Ext.ng.Toolbar\', {\r\n\t\tregion: \'north\',\r\n\t\t" +
                    "rightName: \'");
            
            #line 53 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(QForm));
            
            #line default
            #line hidden
            this.Write("\', //权限名称\r\n\t\tid: \'toolbar\',\r\n\t\tngbuttons: toolbarStr\r\n\t});\r\n\r\n\t");
            
            #line 58 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasBlobdoc != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t//创建金格panel\r\n\t\tvar blobdocPanel = Ext.create(\'Ext.panel.Panel\', {\r\n\t\t\tid: \'Blob" +
                    "docPanel\',\r\n\t\t\tregion: \'center\',\r\n\t\t\ty: ");
            
            #line 63 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FieldSetBlobdoc.Y));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\twidth: \'100%\',\r\n\t\t\tminHeight: ");
            
            #line 65 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FieldSetBlobdoc.Height < 500 ? 500 : FieldSetBlobdoc.Height));
            
            #line default
            #line hidden
            this.Write(@",
			layout: 'fit',
			html: '<div id=""webofficetab"" style=""height:100%""><iframe src="""" style=""width:100% !important;height:100%;"" scrolling=""auto"" id=""webofficeiframe""></iframe></div>',
			listeners: {
				beforeRender: function (com, eOpts) {

				},
				render: function (com, eOpts) {

				}
			}
		});
	");
            
            #line 77 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 79 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasEppocx != "0") { 
            
            #line default
            #line hidden
            this.Write(@"		//创建进度panel
		var eppocxPanel = document.createElement('IFRAME');
		eppocxPanel.scrolling = 'auto';
		eppocxPanel.frameBorder = 0;
		eppocxPanel.src = '';
		eppocxPanel.height = '100%';
		eppocxPanel.width = '100%';

		virtualPanel.on('afterViewport', function () {
			mstform.on('dataready', function () {
				if (Ext.getCmp('pc')) {
					var pcid = Ext.getCmp('pc').getValue();
					if (!Ext.isEmpty(pcid)) {
						eppocxPanel.src = C_ROOT + ""Schedules/SpmNetPlan/EScheduleChild?pc="" + pcid;
					}
				}
			});
		});
	");
            
            #line 98 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 100 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (PictureBoxs.Count > 0) { 
            
            #line default
            #line hidden
            this.Write("\t    //创建图片控件\r\n\t\t");
            
            #line 102 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PictureBoxs.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t    var ");
            
            #line 103 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("Upload = Ext.create(\"Ext.form.field.File\", {\r\n                msgTarget: \'side\',\r" +
                    "\n\t\t\t\tflex: 1,\r\n                buttonText: \'上传\',\r\n                listeners: {\r\n" +
                    "\t\t\t\t    afterrender: function () {\r\n                        ");
            
            #line 109 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write(@"Upload.el.down('input').dom.style.display = 'none';
                    },
                    change: function () {
                        var form = this.up('form').getForm();
                        form.submit({
                            url: C_ROOT + '");
            
            #line 114 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 114 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/");
            
            #line 114 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("ImageUpload\',\r\n                            waitMsg: \'上传图片中...\',\r\n                " +
                    "            success: function (fp, o) {\r\n\t\t\t\t\t\t\t    if (o.result.success) {\r\n   " +
                    "                                 var path = o.result.path;\r\n\t\t\t\t\t\t\t        Ext.g" +
                    "etCmp(\'");
            
            #line 119 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("\' + \'picCom\').getEl().dom.src = C_ROOT + path;\r\n\t\t\t\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 120 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("\' + \'picCom\').show();\r\n\t\t\t\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 121 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write(@"' + '_url').setValue(path);
								}
                            },
							failure: function (fp, o) {
							    Ext.MessageBox.alert('提示', o.result.msg);
							}
                        });
                    }
                }
            });

			var ");
            
            #line 132 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picPanel = Ext.create(\"Ext.form.Panel\", {\r\n\t\t\t    ");
            
            #line 133 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t    width: ");
            
            #line 134 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tx: ");
            
            #line 135 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].XPos));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\ty: ");
            
            #line 136 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].YPos));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\t");
            
            #line 137 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tcolspan : ");
            
            #line 138 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].ColSpan));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\t");
            
            #line 139 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                border: false,\r\n\t\t\t\t");
            
            #line 141 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (!string.IsNullOrEmpty(PictureBoxs[i].Tag)) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\ttitle: ");
            
            #line 142 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Tag));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\t");
            
            #line 143 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tmargin: \'0 10 0 0\',\r\n\t\t\t\titems: [\r\n                    {\r\n                   " +
                    "     xtype: \'component\',\r\n                        width: \'100%\',\r\n              " +
                    "          height: ");
            
            #line 149 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Height));
            
            #line default
            #line hidden
            this.Write(",\r\n                        id: \'");
            
            #line 150 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picCom\',\r\n\t\t\t\t\t\thidden : true,\r\n                        autoEl: { tag: \'img\', src" +
                    ": \'\' },\r\n\t\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\t    render: function() {\r\n\t\t\t\t\t\t\t    Ext.fly(" +
                    "this.el).on(\'click\', function(e,t) {\r\n\t\t\t\t\t\t\t\t    window.open(Ext.getCmp(\'");
            
            #line 156 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picCom\').getEl().dom.src);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t}\r\n                  " +
                    "  },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t    layout: \'hbox\',\r\n\t\t\t\t\t    border: false,\r\n\t\t\t\t\t    items:" +
                    " [\r\n\t\t\t\t\t        ");
            
            #line 165 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write(@"Upload,
					        {
                                flex: 1,
							    border: false,
							    items: [
							        {
						                xtype: 'button',
                                        text: '下载',
							            margin: '1.5 30 0 30',
							            id: '");
            
            #line 174 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("Download\',\r\n\t\t\t\t\t\t\t            hidden : true,\r\n                                  " +
                    "      handler: function() {\r\n                                            var url" +
                    " = Ext.getCmp(\'");
            
            #line 177 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write(@"picCom').getEl().dom.src;
						    	            var a = document.createElement('a');
						    	            var event = new MouseEvent('click');
						    	            a.href = url;
						    	            a.download = '';
						    	            a.dispatchEvent(event);
                                        }
							        }
							    ]
					        }
					    ]
					}
			    ]
			});	
		");
            
            #line 191 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 192 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 194 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (fieldSets.Count==0 && tableLayouts.AllFields.Count > 0 ) { 
            
            #line default
            #line hidden
            this.Write("\t\t");
            
            #line 195 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout) { 
            
            #line default
            #line hidden
            this.Write("\t\tvar mstform = Ext.create(\'Ext.ng.TableLayoutForm\', {\r\n\t\t\tid: \'");
            
            #line 197 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t");
            
            #line 198 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (BodyCmpCount == 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'center\',\r\n\t\t");
            
            #line 200 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'north\',\r\n\t\t");
            
            #line 202 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tbuskey: \'");
            
            #line 203 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\', //对应的业务表主键\r\n\t\t\tautoScroll: true,\r\n\t\t\totype: otype,\r\n\t\t\tminHeight: ");
            
            #line 206 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFormHeight(tableLayouts)));
            
            #line default
            #line hidden
            this.Write(",\t\r\n\t\t\tlayout: {\r\n\t\t\t\ttype: \'absolute\'\r\n\t\t\t},\r\n\t\t\tcolumnsPerRow: ");
            
            #line 210 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.ColumnsPerRow));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\tfieldDefaults: {\r\n\t\t\t\tlabelWidth: ");
            
            #line 212 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.FormLabelWidth));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tmargin: \'3 10 3 0\',\r\n\t\t\t\t//anchor: \'100%\',  //绝对布局下锚定不要\r\n\t\t\t\tmsgTarget: \'s" +
                    "ide\'\r\n\t\t\t},\t\t\r\n\t\t\tfields: [\r\n\t\t\t\t\t");
            
            #line 218 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFormAbs(tableLayouts, PictureBoxs)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t]\r\n\t\t});\r\n\t\t");
            
            #line 221 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\tvar mstform = Ext.create(\'Ext.ng.TableLayoutForm\', {\r\n\t\t\tid: \'");
            
            #line 223 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t");
            
            #line 224 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (BodyCmpCount == 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'center\',\r\n\t\t");
            
            #line 226 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'north\',\r\n\t\t");
            
            #line 228 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tbuskey: \'");
            
            #line 229 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\', //对应的业务表主键\r\n\t\t\tautoScroll: true,\r\n\t\t\totype: otype,\r\n\t\t");
            
            #line 232 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (BodyCmpCount == 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tminHeight: ");
            
            #line 233 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFormHeight(tableLayouts)));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t");
            
            #line 234 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\r\n\t\t\tcolumnsPerRow: ");
            
            #line 235 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.ColumnsPerRow));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\tisBuildByRows: true,\r\n\t\t\tfieldDefaults: {\r\n\t\t\t\tlabelWidth: ");
            
            #line 238 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.FormLabelWidth));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tmargin: \'3 10 3 0\',\r\n\t\t\t\tanchor: \'100%\',\r\n\t\t\t\tmsgTarget: \'side\'\r\n\t\t\t},\t\r\n\t" +
                    "\t\tfieldRows: [\r\n\t\t\t\t");
            
            #line 244 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetForm(tableLayouts, PictureBoxs)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t]\r\n\t\t});\r\n\t\t");
            
            #line 247 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 248 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 250 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Reltable != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\tvar reltables = reltable.split(\';\');\r\n\t\tvar masReltables = [];\r\n\t\tvar slaReltab" +
                    "les = [];\r\n\t\tfor(var i = 0; i < reltables.length; i++)\r\n\t\t{\r\n\t\t\tvar temp = relta" +
                    "bles[i].split(\'@\');\r\n\t\t\tmasReltables[i] = temp[0];\r\n\t\t\tslaReltables[i] = temp[1]" +
                    ";\r\n\t\t}\r\n\t");
            
            #line 260 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t");
            
            #line 263 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < AllGrids.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t//");
            
            #line 264 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid\r\n\t\tvar ");
            
            #line 265 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("cellEditing = Ext.create(\'Ext.grid.plugin.CellEditing\', {\r\n\t\t\tclicksToEdit: 1,  /" +
                    "/单击编辑，单元格修改\r\n\t\t\tlisteners: {\r\n\t\t\t\tedit: function (editor, e) {\r\n\t\t\t\t\tif (e.origi" +
                    "nalValue == e.value) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t");
            
            #line 273 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
    if (Expressions.ContainsValue("GridNormal")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 274 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 275 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            if (item.Value == "GridNormal") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 276 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t\t");
            
            #line 277 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            }}} 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t");
            
            #line 282 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t//--树grid\r\n\t\t\tvar ");
            
            #line 284 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid = Ext.create(\'Ext.ng.TreePanel\', {\r\n\t\t\t");
            
            #line 285 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].Title != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\ttitle: \'");
            
            #line 286 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Title));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t");
            
            #line 287 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\theight: ");
            
            #line 288 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Height > 200 ? AllGrids[i].Height : 200));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tregion: \'");
            
            #line 289 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Region));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\tid: \'");
            
            #line 290 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid\',\r\n\t\t\t\tmargin: \'0 0 10 0\',\r\n\t\t\t");
            
            #line 292 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (!string.IsNullOrEmpty(AllGrids[i].LevelSum)) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tsumByLevel: true,\r\n                sumByLevelCols: [");
            
            #line 294 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].LevelSum));
            
            #line default
            #line hidden
            this.Write("], //级次汇总列\r\n\t\t\t");
            
            #line 295 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t");
            
            #line 296 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout || (BodyCmpCount <= 1)) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tx: ");
            
            #line 297 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].X));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\ty: ");
            
            #line 298 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Y));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\twidth: ");
            
            #line 299 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 300 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tminHeight: ");
            
            #line 301 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Height < 150 ? 150 : AllGrids[i].Height));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 302 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].Collapse == "1") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tcollapsible: true,\r\n\t\t\t");
            
            #line 304 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\r\n\t\t\t\tbuskey: \'");
            
            #line 305 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\', //对应的业务表主键属性\r\n\t\t\t\totype: otype,\r\n\t\t\t\tautoLoad: false,\r\n\t\t\t\tcolumnLines: true,\r" +
                    "\n\t\t\t\trowLines: true,\r\n\t\t\t\turl: C_ROOT + \'");
            
            #line 310 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 310 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/Get");
            
            #line 310 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("List?istreegrid=1&id=\' + busid,\r\n\t\t\t\ttreeFields: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \'phid\',\r\n" +
                    "\t\t\t\t\t\ttype: \'string\',\r\n\t\t\t\t\t\tmapping: \'phid\'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t");
            
            #line 317 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetPageModelFields(AllGrids[i],"Edit",4)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t],\r\n\t\t\t\tcolumns: [");
            
            #line 319 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetPageGridColumns(AllGrids[i],"Edit",4)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t");
            
            #line 320 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].Columns.Count>0){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t,{\r\n\t\t\t\t\ttext: \'主键\',\r\n\t\t\t\t\tdataIndex: \'");
            
            #line 323 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\t\thidden: true\r\n\t\t\t\t}\r\n\t\t\t\t");
            
            #line 326 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t],        \t\t\r\n\t\t\t\tlisteners: {\r\n\t\t\t\t\tbeforeedit: function (editor, e, eOpts) " +
                    "{\r\n\t\t\t\t\t var data = ");
            
            #line 330 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getSelectionModel().getSelection();\r\n\t\t\t\t        if (data.length > 0 && !dat" +
                    "a[0].raw.leaf) {\r\n\t\t\t\t            return false;\r\n\t\t\t\t        }\r\n\t\t\t\t\t\t//有物资列的话，单" +
                    "位列设为只读\r\n\t\t\t\t\t\tif (e.field == \'msunit_name\') {\r\n\t\t\t\t\t\t\tif (");
            
            #line 336 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getColumn(\'itemid\')) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t" +
                    "\t\t\t");
            
            #line 341 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("asr_flg")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t,\r\n\t\t\t\t\t\tcelldblclick: function (editor, td, cellIndex, record, tr, rowInde" +
                    "x, e, eOpts) {\r\n\t\t\t\t\t\t\tif (editor.getHeaderAtIndex(cellIndex).dataIndex == \'asr_" +
                    "flg\') {\r\n\t\t\t\t\t\t\t\tcurGrid = ");
            
            #line 345 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid;\r\n\t\t\t\t\t\t\t\tcurGrid.getSelectionModel().select(rowIndex);\r\n\t\t\t\t\t\t\t\tOpenAttachm" +
                    "ent(\'grid\', \'");
            
            #line 347 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("\');\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t");
            
            #line 350 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t},\r\n\t\t\t\tplugins: [");
            
            #line 352 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("cellEditing\t\t\r\n\t\t\t\t\t\t");
            
            #line 353 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("res_code")){ 
            
            #line default
            #line hidden
            this.Write(@"							,
							{
								pluginId: 'itempropertycellediting',
								ptype: 'itempropertycellediting',
								resPropertysCol: 'res_propertys',////组合名称字段名，不显示可空
								resMasterDataCol: '',////资源信息字段名，不修改保存可空
								phidItemDetailCol: 'itemid'////事物特性内容主键字段名，不可空
							}
						");
            
            #line 362 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t] //绑定编辑对象\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar ");
            
            #line 366 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store = ");
            
            #line 366 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.store;\r\n\t\t");
            
            #line 367 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\tExt.define(\'");
            
            #line 368 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("model\', {\r\n\t\t\t\textend: \'Ext.data.Model\',\r\n\t\t\t\tfields: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: \'phid\'" +
                    ",\r\n\t\t\t\t\ttype: \'string\',\r\n\t\t\t\t\tmapping: \'phid\'\r\n\t\t\t\t},\r\n\t\t\t\t");
            
            #line 376 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetPageModelFields(AllGrids[i],"Edit",4)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar ");
            
            #line 380 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store = Ext.create(\'Ext.ng.JsonStore\', {\r\n\t\t\t\tmodel: ");
            
            #line 381 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("model,\r\n\t\t\t\tautoLoad: false,\r\n\t\t\t");
            
            #line 383 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].Groupfield.Count > 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tgroupField: otype == \'view\' ? \'s_groupfield\' : \'\',\r\n\t\t\t");
            
            #line 385 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\turl: C_ROOT + \'");
            
            #line 386 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 386 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/Get");
            
            #line 386 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("List\'\r\n\t\t\t});\r\n\r\n\t\t\tvar ");
            
            #line 389 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid = Ext.create(\'Ext.ng.GridPanel\', {\r\n\t\t\t");
            
            #line 390 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].Title != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\ttitle: \'");
            
            #line 391 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Title));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t");
            
            #line 392 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t    height: ");
            
            #line 393 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Height > 200 ? AllGrids[i].Height : 200));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tregion: \'");
            
            #line 394 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Region));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\tid: \'");
            
            #line 395 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid\',\r\n\t\t\t\tmargin: \'0 0 10 0\',\r\n\t\t\t\tstateful: true,\r\n\t\t\t\tstateId: \'");
            
            #line 398 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid\',\r\n\t\t\t\tmultiSelect: isMultiSelect,\r\n\t\t\t");
            
            #line 400 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].Sumdic.Count > 0 || AllGrids[i].Subdic.Count > 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tfeatures: ");
            
            #line 401 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetSummary(AllGrids[i])));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 402 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tstore: ");
            
            #line 403 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store,\r\n\t\t\t");
            
            #line 404 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout || (BodyCmpCount <= 1)) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tx: ");
            
            #line 405 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].X));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\ty: ");
            
            #line 406 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Y));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\twidth: ");
            
            #line 407 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 408 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tminHeight: ");
            
            #line 409 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].Height < 150 ? 150 : AllGrids[i].Height));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t");
            
            #line 410 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].Collapse == "1") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\tcollapsible: true,\r\n\t\t\t");
            
            #line 412 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\r\n\t\t\t\tbuskey: \'");
            
            #line 413 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\', //对应的业务表主键属性\r\n\t\t\t\totype: otype,\r\n\t\t\t\tcolumnLines: true,\r\n\t\t\t\tcolumns: [");
            
            #line 416 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetPageGridColumns(AllGrids[i],"Edit",4)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t");
            
            #line 417 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].Columns.Count>0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t,{\r\n\t\t\t\t\theader: \'主键\',\r\n\t\t\t\t\tdataIndex: \'");
            
            #line 420 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\t\thidden: true\r\n\t\t\t\t}\r\n\t\t\t\t");
            
            #line 423 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t],        \t\t\r\n\t\t\t\tlisteners: {\r\n\t\t\t\t\tbeforeedit: function (editor, e, eOpts) " +
                    "{\r\n\t\t\t\t\t\t//有物资列的话，单位列设为只读\r\n\t\t\t\t\t\tif (e.field == \'msunit_name\') {\r\n\t\t\t\t\t\t\tif (");
            
            #line 429 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getColumn(\'itemid\')) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t" +
                    "\t\t\t");
            
            #line 434 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("asr_flg")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t,\r\n\t\t\t\t\t\tcelldblclick: function (editor, td, cellIndex, record, tr, rowInde" +
                    "x, e, eOpts) {\r\n\t\t\t\t\t\t\tif (editor.getHeaderAtIndex(cellIndex).dataIndex == \'asr_" +
                    "flg\') {\r\n\t\t\t\t\t\t\t\tcurGrid = ");
            
            #line 438 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid;\r\n\t\t\t\t\t\t\t\tcurGrid.getSelectionModel().select(rowIndex);\r\n\t\t\t\t\t\t\t\tOpenAttachm" +
                    "ent(\'grid\', \'");
            
            #line 440 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("\');\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t");
            
            #line 443 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t},\r\n\t\t\t\tplugins: [");
            
            #line 445 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("cellEditing\t\t\r\n\t\t\t\t\t\t");
            
            #line 446 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("res_code")){ 
            
            #line default
            #line hidden
            this.Write(@"							,
							{
								pluginId: 'itempropertycellediting',
								ptype: 'itempropertycellediting',
								resPropertysCol: 'res_propertys',////组合名称字段名，不显示可空
								resMasterDataCol: '',////资源信息字段名，不修改保存可空
								phidItemDetailCol: 'itemid'////事物特性内容主键字段名，不可空
							}
						");
            
            #line 455 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t] //绑定编辑对象\r\n\t\t\t});\r\n\t\t");
            
            #line 458 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t");
            
            #line 460 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("res_code")) { 
            
            #line default
            #line hidden
            this.Write("\t\t//事物特性控件批量录入\r\n\t\t");
            
            #line 462 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getPlugin(\'itempropertycellediting\').on(\'onBatchInput\', function (records) {" +
                    "\r\n\t\t\tvar addrows = ");
            
            #line 463 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getSelectionModel().getSelection();\r\n\t\t\tif (addrows.length > 0) {\r\n\t\t\t\tExt.A" +
                    "rray.forEach(records, function (item) {\r\n\t\t\t\t\tvar data = {};\r\n\t\t\t\t\tExt.apply(dat" +
                    "a, addrows[0].data);\r\n\t\t\t\t\tExt.apply(data, item);\r\n\r\n\t\t\t\t\t");
            
            #line 470 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.addrow(data);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t");
            
            #line 474 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t//设定当前grid和store\r\n\t\t");
            
            #line 477 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.addListener(\'containerclick\', function (me, e, eOpts) {\r\n\t\t\tcurGrid = ");
            
            #line 478 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid;\r\n\t\t\tcurStore = curGrid.store;\r\n\t\t\tsetButtonStatus(curGrid);\r\n\t\t});\r\n\t\t");
            
            #line 482 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.addListener(\'cellclick\', function (me, rowIndex, columnIndex, e) {\r\n\t\t\tcurGr" +
                    "id = ");
            
            #line 483 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid;\r\n\t\t\tcurStore = curGrid.store;\r\n\t\t\tsetButtonStatus(curGrid);\r\n\t\t});\r\n\r\n\t");
            
            #line 488 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("\t\t ");
            
            #line 489 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getView().getRowClass = function (record, index, rowParams, store) {\r\n      " +
                    "      if (!record.data.leaf) {\r\n                return \'row-parentLevel\';\r\n     " +
                    "       }\r\n\t\t\telse{\r\n\t\t\t    return \'row-leafLevel\';\r\n\t\t\t}\r\n         };\r\n\t\t ");
            
            #line 497 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t");
            
            #line 499 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Reltable != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\tvar ");
            
            #line 500 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("indexs = [];\r\n\t\tfor (var i = 0; i < masReltables.length; i++)\r\n\t\t{\r\n\t\t   if (\'");
            
            #line 503 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("\' == masReltables[i]) {\r\n\t\t       ");
            
            #line 504 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("indexs.push(i);\r\n\t\t    }\r\n\t\t}\r\n\t\tif(");
            
            #line 507 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("indexs.length > 0){\r\n\t\t   ");
            
            #line 508 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.addListener(\'selectionchange\', function (me, selection, eOpts) {\r\n\t\t      fo" +
                    "r (var i = 0; i < ");
            
            #line 509 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("indexs.length; i++)\r\n\t\t      {\r\n\t\t\t     Ext.getCmp(slaReltables[i] + \'grid\').getS" +
                    "tore().filter = function (record, id) {\r\n\t\t\t\t    if (record != undefined && id !" +
                    "= undefined) {\r\n                       var selection = ");
            
            #line 513 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getSelectionModel().getSelection()[0];\r\n                       return record" +
                    ".get(\'rel_key1\') == selection.data.rel_key1;\r\n\t\t\t\t\t}\r\n                 };\r\n     " +
                    "            if (");
            
            #line 517 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.getSelectionModel().getSelection().length > 0) {\r\n                    Ext.ge" +
                    "tCmp(slaReltables[i] + \'grid\').getStore().filterBy(Ext.getCmp(slaReltables[i] + " +
                    "\'grid\').getStore().filter);\r\n                 }\r\n\t\t      }\r\n\t\t   });\r\n\t\t}\r\n\t\t");
            
            #line 523 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 524 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 526 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasAsrGrid == "1") { 
            
            #line default
            #line hidden
            this.Write("\t    //附件单据体\r\n\t\tvar asrgridstore = Ext.create(\'Ext.ng.JsonStore\', {\r\n\t\t\tfields: [" +
                    "\'asr_name\', \'logid\', \'asr_dt\'],\r\n\t\t    autoLoad: false,\r\n\t\t\turl: C_ROOT + \'");
            
            #line 531 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 531 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/GetAsrGridList\'\r\n\t\t});\r\n\r\n\t\tvar asrgrid = Ext.create(\'Ext.ng.GridPanel\', {\r\n" +
                    "\t\t");
            
            #line 535 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tx: ");
            
            #line 536 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AsrGrid.X));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\ty: ");
            
            #line 537 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AsrGrid.Y));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\twidth: ");
            
            #line 538 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AsrGrid.Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t");
            
            #line 539 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\theight: ");
            
            #line 540 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AsrGrid.Height));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\tstore: asrgridstore,\r\n\t\t\tcolumnLines: true,\r\n\t\t\tcolumns: [");
            
            #line 543 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetAsrGridColumns(AsrGrid)));
            
            #line default
            #line hidden
            this.Write("]\r\n\t\t});\r\n\t");
            
            #line 545 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 547 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (fieldSets.Count > 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t//fieldSets\r\n\t\tvar mstform = Ext.create(\'Ext.ng.FieldSetForm\', {\r\n\t\t\tid: \'");
            
            #line 550 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t");
            
            #line 551 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout || BodyCmpCount == 0) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'center\',\r\n\t\t");
            
            #line 553 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\tregion: \'north\',\r\n\t\t");
            
            #line 555 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tautoScroll: true,\r\n\t\t\tframe: true,\r\n\t\t\tborder: false,\r\n\t\t\tbuskey: \'");
            
            #line 559 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PkPropertyname));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\totype: otype,  //操作类型,add||edit\r\n\t\t\tminHeight: ");
            
            #line 561 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFormHeight(fieldSets)));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\tisBuildByRows: true,\r\n\t\t\tbodyStyle: \'padding-bottom:8px\',\r\n\t\t");
            
            #line 564 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if ( tableLayouts.IsAbsoluteLayout ) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tlayout: {\r\n\t\t\t\ttype: \'absolute\'\r\n\t\t\t},\r\n\t\t");
            
            #line 568 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\tfieldDefaults: {\r\n\t\t\t\tlabelWidth: ");
            
            #line 570 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.FormLabelWidth));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tmargin: \'3 10 3 0\',\r\n\t\t\t\t//anchor: \'100%\',  //绝对布局下锚定不要\r\n\t\t\t\tmsgTarget: \'s" +
                    "ide\'\r\n\t\t\t},\t\r\n\t\t\tfieldSets: [\t\t\t\t    \r\n\t\t\t\t");
            
            #line 576 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetFieldSetsExt(tableLayouts, fieldSets, null, panels, PictureBoxs)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t]\r\n\t\t});\r\n\t");
            
            #line 579 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t//布局面板数组\r\n\tvar layoutItem = [ngToolbar];\r\n\r\n\t//工作流panel\r\n\tvar buttonItem = [" +
                    "\'save\', \'attachment\'];\r\n\tif (");
            
            #line 587 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames.Count));
            
            #line default
            #line hidden
            this.Write(@" > 0 ){
		buttonItem.push('addrow');
		buttonItem.push('deleterow');
		buttonItem.push('import');
	}
	if (WorkFlowInfo.wfotype) {
		layoutItem.push({
			xtype: 'panel',
			region: 'north',
			height: 175,
			autoScroll: true,
			bodyStyle: ""padding-right:20px"",
			items: [{
				xtype: 'ngWorkFlowPanel',
				toolbar: ngToolbar,
				otype: otype,
				bizType: '");
            
            #line 603 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\tbizPhid: busid,\r\n\t\t\t\tshowToolBarItems: buttonItem,  //任务办理时可见toolbar按钮ite" +
                    "mid数组\r\n\t\t\t\tworkFlowInfo: WorkFlowInfo,\r\n\t\t\t\tbizSaveAsync: true,\r\n\t\t\t\tbizSaveFn: " +
                    "function (callback, oper) {\r\n\t\t\t\t\t//审批节点的话调审核前检测函数\r\n                    if (Work" +
                    "FlowInfo.compType == 3 && oper == \'taskComplete\' && typeof beforeVerifyEdit === " +
                    "\"function\") {\r\n                        if (!beforeVerifyEdit()) {\r\n             " +
                    "               return false;\r\n                        }\r\n                    }\r\n" +
                    "\r\n                    //调取消审批前检测函数\r\n                    if (WorkFlowInfo.isBizAp" +
                    "proved == true && WorkFlowInfo.compType == 3 && oper == \'rollBack\' && typeof bef" +
                    "oreUnVerifyEdit === \"function\") {\r\n                        if (!beforeUnVerifyEd" +
                    "it()) {\r\n                            return false;\r\n                        }\r\n " +
                    "                   }\r\n\t\t\t\t\tSave(callback);\r\n\t\t\t\t},\r\n\t\t\t\tgetAttachData : function" +
                    " (oper) {\r\n\t\t\t\t\t//调取消审批前检测函数\r\n                    if (WorkFlowInfo.isBizApproved" +
                    " == true && WorkFlowInfo.compType == 3 && oper == \'rollBack\' && typeof beforeUnV" +
                    "erifyEdit === \"function\") {\r\n                        if (!beforeUnVerifyEdit()) " +
                    "{\r\n                            return { funcname: \'@@##\' };\r\n                   " +
                    "     }\r\n                    }\r\n\r\n\t\t\t\t\tif (typeof getSaveDataEdit === \"function\")" +
                    " {\r\n                        if (WorkFlowInfo.compType == 3 && oper == \'taskCompl" +
                    "ete\') {\r\n                            return getSaveDataEdit(\"Approve\");\r\n       " +
                    "                 }\r\n\t\t\t\t\t\tif (WorkFlowInfo.isBizApproved == true && WorkFlowInfo" +
                    ".compType == 3 && oper == \'rollBack\') {\r\n                            return getS" +
                    "aveDataEdit(\"UnApprove\");\r\n                        }                        \r\n  " +
                    "                  } else {\r\n                        return;\r\n                   " +
                    " }\r\n\t\t\t\t},\r\n\t\t\t\tlisteners: {\r\n\t\t\t\t\ttaskComplete: function (compId, wfParam) {\r\n\t" +
                    "\t\t\t\t\t//alert(\"调用业务进行业务处理\")\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcolspan: 4\r\n\t\t\t}]\r\n\t\t});\r\n\t} \r\n\t" +
                    "");
            
            #line 652 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasWfGrid == "1") { 
            
            #line default
            #line hidden
            this.Write("\telse {\r\n\t\tif (otype != \'copy\'){\r\n\t\t\tlayoutItem.push({\r\n\t\t\t\txtype: \'ngWorkFlowPan" +
                    "el\',\r\n\t\t\t\totype: otype,\r\n\t\t\t\tbizType: \'");
            
            #line 658 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\',\r\n\t\t\t\tbizPhid: busid,\r\n\t\t\t\tshowFlowHis: true,\r\n\t\t\t\thisGridStateId: \'");
            
            #line 661 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("workflowhisgrid\',\r\n\t\t\t\t");
            
            #line 662 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (tableLayouts.IsAbsoluteLayout) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t    x: ");
            
            #line 663 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(WfGrid.X));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t    y: ");
            
            #line 664 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(WfGrid.Y));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t    width: ");
            
            #line 665 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(WfGrid.Width));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t        ");
            
            #line 666 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t    height: ");
            
            #line 667 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(WfGrid.Height));
            
            #line default
            #line hidden
            this.Write(",\r\n\t\t\t\tregion: \'south\',\r\n\t\t\t\tcolspan: 4\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t");
            
            #line 673 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\r\n\tlayoutItem.push({\r\n\t\txtype: \'panel\',\r\n\t\tlayout: \'border\',\r\n\t\tregion: \'center\'" +
                    ",\r\n\t\tautoScroll: true,\r\n\t\tbodyStyle: \"padding-right:20px\",\r\n\t\titems: [");
            
            #line 681 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetViewPortItems(fieldSets, panels, tableLayouts, HasBlobdoc, HasEppocx)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t");
            
            #line 682 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasAsrGrid == "1") { 
            
            #line default
            #line hidden
            this.Write(" ,asrgrid ");
            
            #line 682 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"]
	});

    //布局
    var viewport = Ext.create('Ext.container.Viewport', {
        id: ""viewPort"",
        layout: 'border',
        items: layoutItem
    });

	//触发虚面板事件
	virtualPanel.fireEvent('afterViewport');

	//edit 编辑初始化时公共代码
	CommonReadyEdit();

	");
            
            #line 698 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
    if (Expressions.ContainsValue("Normal")) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 699 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 700 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            if (item.Value == "Normal") { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 701 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 702 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            }}} 
            
            #line default
            #line hidden
            this.Write("\r\n\t//设置grid列为只读、必输等状态\r\n\t   ");
            
            #line 705 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < AllGrids.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 706 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (!AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 707 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.SetGridColStatus(AllGrids)));
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 708 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 709 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t//预览不做任何数据操作\r\n    if (IsSso == \'true\') {\r\n        return;\r\n    }\r\n\r\n\t//自定义帮助列添" +
                    "加外部查询条件\r\n\t");
            
            #line 717 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.GetOutFilter(tableLayouts, fieldSets, panels)));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t");
            
            #line 719 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasBlobdoc == "1") { 
            
            #line default
            #line hidden
            this.Write("\t//加载金格控件模板文件\r\n\tif (Ext.getCmp(\'otid\')) {\r\n\t\tExt.getCmp(\'otid\').addListener(\'befo" +
                    "retriggerclick\', function () {\r\n\t\t\t");
            
            #line 723 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (!string.IsNullOrEmpty(tableLayouts.Otid)) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tExt.getCmp(\'otid\').setClientSqlFilter(\"phid in (");
            
            #line 724 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(tableLayouts.Otid));
            
            #line default
            #line hidden
            this.Write(")\");\r\n\t\t\t");
            
            #line 725 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
			Ext.getCmp('otid').setOutFilter({ 'chk_status': '1' });
			return true;
        });

        Ext.getCmp('otid').addListener('helpselected', function (obj) {
			blobdocUrl = C_ROOT + 'WM/Archive/KingGridObject/KingGridObjectEdit?OpType=Add&DataFrom=custom&RecordID=' + obj.code;

			if (obj.name.indexOf('.xlsx')>0) {
                blobdocUrl += '&FileType=' + '.xlsx';
            }
			else if (obj.name.indexOf('.xls')>0) {
                blobdocUrl += '&FileType=' + '.xls';
            }

			if (window.frames['webofficeiframe']) {
				if (window.frames['webofficeiframe'].document) {
					window.frames['webofficeiframe'].document.location = blobdocUrl;
				}
			}
        });
    }
	");
            
            #line 748 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 750 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
    for (int i = 0; i < panels.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 751 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        if (panels[i].Height<=0){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t   ");
            
            #line 752 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(panels[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.hide(); \r\n\t");
            
            #line 753 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        } 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 754 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
    } 
            
            #line default
            #line hidden
            this.Write("\r\n    if (otype == $Otype.EDIT || otype == $Otype.VIEW || otype == \'copy\') {\r\n   " +
                    "     Ext.Ajax.request({\r\n            params: { \'id\': busid },\r\n\t\t\tasync: false, " +
                    "//同步请求\r\n            url: C_ROOT +\'");
            
            #line 760 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 760 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"Edit/GetMasterInfo',
            success: function (response) {
                var resp = Ext.JSON.decode(response.responseText);
                if (resp.Status === ""OK"") {
					var mstformobj = mstform.getForm();
                    mstformobj.setValues(resp.Data);
					
					");
            
            #line 767 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PictureBoxs.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\tif (otype == $Otype.VIEW) {\r\n\t\t\t\t\t\t");
            
            #line 769 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("Upload.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (resp.Data.");
            
            #line 771 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("_url != \'\' && resp.Data.");
            
            #line 771 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("_url != null){\r\n\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 772 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picCom\').getEl().dom.src = C_ROOT + resp.Data.");
            
            #line 772 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("_url;\r\n\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 773 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("picCom\').show();\r\n\t\t\t\t\t\tExt.getCmp(\'");
            
            #line 774 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PictureBoxs[i].Name));
            
            #line default
            #line hidden
            this.Write("Download\').show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t");
            
            #line 776 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t\t//复制时单据编号要重新设置，主键phid要清空\r\n\t\t\t\t\tif (otype == \'copy\') {\r\n\t\t\t\t\t\tExt.getCmp(\'p" +
                    "hid\').setValue(\'\');\r\n\t\t\t\t\t\tExt.getCmp(\'code\').setValue(\'\');\r\n\t\t\t\t\t\tif (Ext.getCm" +
                    "p(\'bill_dt\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'bill_dt\').setValue(CurDate);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t" +
                    "\tif (Ext.getCmp(\'asr_flg\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'asr_flg\').setValue(\'0\');\r\n\t\t\t\t" +
                    "\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'ischeck\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'ischeck\').setValue(0" +
                    ");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'check_dt\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'check_dt\')." +
                    "setValue(null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'checkpsn\')) {\r\n\t\t\t\t\t\t\tExt.getCmp" +
                    "(\'checkpsn\').setValue(null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'bill_no\')) {\r\n\t\t\t\t\t" +
                    "\t\t Ext.getCmp(\'bill_no\').setValue(billno);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//任务分解\r\n\t\t\t\t\t\tif (E" +
                    "xt.getCmp(\'s_task_wf\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'s_task_wf\').setValue(PhidWork);\r\n\t" +
                    "\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Ext.getCmp(\'s_task_node\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'s_task_node\')" +
                    ".setValue(PhidWorkNode);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//记账字段清空\r\n                        if " +
                    "(Ext.getCmp(\'tr_date\')) {\r\n                            Ext.getCmp(\'tr_date\').set" +
                    "Value(null);\r\n                        }\r\n                        if (Ext.getCmp(" +
                    "\'voucher_flag\')) {\r\n                            Ext.getCmp(\'voucher_flag\').setVa" +
                    "lue(null);\r\n                        }\r\n                        if (Ext.getCmp(\'t" +
                    "r_num\')) {\r\n                            Ext.getCmp(\'tr_num\').setValue(null);\r\n  " +
                    "                      }\r\n                        if (Ext.getCmp(\'tr_type\')) {\r\n " +
                    "                           Ext.getCmp(\'tr_type\').setValue(null);\r\n              " +
                    "          }\r\n\t\t\t\t\t}\r\n\r\n                    ");
            
            #line 824 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.BatchBindCombox(tableLayouts, fieldSets)));
            
            #line default
            #line hidden
            this.Write("\r\n\r\n\t\t\t\t\tif (otype == $Otype.EDIT) {\r\n\t\t\t\t\t\t");
            
            #line 827 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.FireEvents(tableLayouts)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t\t\t");
            
            #line 828 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.FireEvents(fieldSets)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t");
            
            #line 831 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasBlobdoc == "1") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t//取得金格控件内容\r\n\t\t\t\t\tGetBlobDoc(\'edit\');\r\n\t\t\t\t\t");
            
            #line 834 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
					//mstform数据查出来赋完值后
                    mstform.fireEvent('dataready');
                } else {
                    Ext.MessageBox.alert('取数失败', resp.status);
                }

				//保存form初始值
				mstform.setOriginValue(JSON.stringify(mstform.getForm().getValues()))
            }
        });

		");
            
            #line 847 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < AllGrids.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t");
            
            #line 848 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t//");
            
            #line 849 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid明细，树grid\r\n\t\t\t\t//来自任务分解查看原汇总信息\r\n\t\t\t\t");
            
            #line 851 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write(@"grid.addListener('load', function (me, node, records, successful, eOpts) {
					if (node.childNodes.length > 0) {
						Ext.Array.each(node.childNodes, function (childNode) {
							gridLoadSet(childNode, otype);
						});
						otype = otypeori;
						");
            
            #line 857 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.expandAll();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (BusType == \'2\') {\r\n\t\t\t\t\t");
            
            #line 861 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.loadByUrl(C_ROOT + \'");
            
            #line 861 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 861 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/Get");
            
            #line 861 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("List?istreegrid=1&bustype=2&id=\' + busid + \"&ids=\" + IDs + \'&phidwork=\' + PhidWor" +
                    "k);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t");
            
            #line 864 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.load();\r\n\t\t\t\t}\r\n\t\t\t");
            
            #line 866 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\r\n\t\t\t\t//");
            
            #line 867 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid明细\r\n\t\t\t\t//来自任务分解查看原汇总信息\r\n\t\t\t\tif (BusType == \'2\') {\r\n\t\t\t\t\tExt.apply(");
            
            #line 870 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.proxy.extraParams, { \'id\': busid, \'bustype\': 2, \'ids\': IDs, \'phidwork\': Phi" +
                    "dWork });\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tExt.apply(");
            
            #line 873 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.proxy.extraParams, { \'id\': busid });\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\t");
            
            #line 875 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.cachePageData = false;\r\n\t\t\t\t");
            
            #line 876 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.load(function (records, operation, success) {\r\n\t\t\t\t\tif (records.length > 0)" +
                    " {\r\n\t\t\t\t\t\tExt.Array.each(records, function (rd) {\r\n\t\t\t\t\t\t\tgridLoadSet(rd, otype)" +
                    ";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\totype = otypeori;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t");
            
            #line 884 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Reltable != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\tfor (var i = 0; i < slaReltables.length; i++)\r\n\t\t\t\t\t{\r\n\t\t   \t\t\t\tif (\'");
            
            #line 887 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("\' == slaReltables[i]) {\r\n\t\t\t\t\t\t\t");
            
            #line 888 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.filter = function (record, id) {               \r\n            \t\t\t\t\treturn fa" +
                    "lse;\r\n        \t\t\t\t\t};\r\n        \t\t\t\t\t");
            
            #line 891 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.filterBy(");
            
            #line 891 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.filter);\r\n\t\t      \t\t\t\tbreak;\r\n\t\t    \t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t");
            
            #line 895 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t});\r\n\t\t\t\t");
            
            #line 897 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.cachePageData = true;\r\n\t\t\t");
            
            #line 898 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\r\n\t\t");
            
            #line 899 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t$CreateFloatMenu(\'");
            
            #line 901 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\');\r\n\r\n\t\t");
            
            #line 903 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasAsrGrid == "1") { 
            
            #line default
            #line hidden
            this.Write(" \r\n\t\tasrgridstore.load({ params: { \"tablename\": \'");
            
            #line 904 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\', \'asr_code\': Ext.getCmp(\'phid\').getValue() } });\r\n\t\t");
            
            #line 905 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("    }\r\n\r\n\t//当新增时\r\n    if (otype == $Otype.ADD) {\r\n\t\t");
            
            #line 910 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
    if (Expressions.ContainsValue("AddInit")) { 
            
            #line default
            #line hidden
            this.Write("\t\t");
            
            #line 911 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t\t");
            
            #line 912 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            if (item.Value == "AddInit") { 
            
            #line default
            #line hidden
            this.Write("\t\t");
            
            #line 913 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t");
            
            #line 914 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            }}} 
            
            #line default
            #line hidden
            this.Write(@" 
	   
		if (Ext.getCmp('bill_dt')) {
			Ext.getCmp('bill_dt').setValue(CurDate);
		}
		if (Ext.getCmp('bill_no')) {
		   Ext.getCmp('bill_no').setValue(billno);
		}
		if (Ext.getCmp('fillpsn')) {
			Ext.getCmp('fillpsn').setValue($appinfo.userID);
		}

		if (Ext.getCmp('ocode')) {
			if (!Ext.isEmpty(TreeOrgId)) {
				Ext.getCmp('ocode').setValue(TreeOrgId);
			}
			else {
				Ext.getCmp('ocode').setValue($appinfo.orgID);
			}
		}

		if (Ext.getCmp('pc')) {
			if (!Ext.isEmpty(TreeProjId) && Ext.isEmpty(Ext.getCmp('pc').getValue())) {
				Ext.getCmp('pc').setValue(TreeProjId);
			}
		}

		if (Ext.getCmp('s_task_wf')) {
			Ext.getCmp('s_task_wf').setValue(PhidWork);
		}
		if (Ext.getCmp('s_task_node')) {
			Ext.getCmp('s_task_node').setValue(PhidWorkNode);
		}
		if (Ext.getCmp('s_task_phid')) {
			Ext.getCmp('s_task_phid').setValue(PhidTemplate);
		}

		");
            
            #line 951 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Common.BatchBindCombox(tableLayouts, fieldSets)));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\r\n\t\t");
            
            #line 953 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasBlobdoc == "1") { 
            
            #line default
            #line hidden
            this.Write("\t\t//取得金格控件内容\r\n\t\tGetBlobDoc(\'add\');\r\n\t\t");
            
            #line 956 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
		//保存form初始值
        mstform.setOriginValue(JSON.stringify(mstform.getForm().getValues()));

		//mstform新增初始数据赋值完成后执行
        mstform.fireEvent('dataready');
    }

	//部分字段始终只读
	if (Ext.getCmp('bill_dt')) {
		Ext.getCmp('bill_dt').userSetReadOnly(true);
	}
	if (Ext.getCmp('bill_no')) {
		Ext.getCmp('bill_no').userSetReadOnly(true);
	}
	if (Ext.getCmp('fillpsn')) {
		Ext.getCmp('fillpsn').userSetReadOnly(true);
	}
	if (Ext.getCmp('checkpsn')) {
		Ext.getCmp('checkpsn').userSetReadOnly(true);
	}
	if (Ext.getCmp('ischeck')) {
		Ext.getCmp('ischeck').userSetReadOnly(true);
	}
	if (Ext.getCmp('check_dt')) {
		Ext.getCmp('check_dt').userSetReadOnly(true);
	}

    //当不存在grid时
    if (");
            
            #line 986 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames.Count));
            
            #line default
            #line hidden
            this.Write(@" == 0 ) {
        if (ngToolbar.get('addrow')) {
            ngToolbar.get('addrow').hide();
        }
        if (ngToolbar.get('deleterow')) {
            ngToolbar.get('deleterow').hide();
        }
		if (ngToolbar.get('import')) {
            ngToolbar.get('import').hide();
        }
    }
	else {
		");
            
            #line 998 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (PanelNames.Count > 0) { 
            
            #line default
            #line hidden
            this.Write("\t\tcurGrid = ");
            
            #line 999 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[0]));
            
            #line default
            #line hidden
            this.Write("grid;\r\n\t\tcurStore = curGrid.store;\r\n\t\tsetButtonStatus(curGrid);\r\n\t\t");
            
            #line 1002 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t}\r\n\r\n");
            
            #line 1005 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Reltable != "0") { 
            
            #line default
            #line hidden
            this.Write(@"    function AddRowHandle(record)
    {
         var tablename = curGrid.id.replace('grid', '');
        for (var i = 0; i < slaReltables.length; i++) {
            if (tablename == slaReltables[i]) {
                record.rel_key1 = Ext.getCmp(masReltables[i] + 'grid').getSelectionModel().getSelection()[0].data.rel_key1;
                curStore.insert(curStore.getCount(), record);
                return;
            }
        }
        for (var i = 0; i < masReltables.length; i++) {
            if (tablename == masReltables[i]) {
                Ext.Ajax.request({
                    url: C_ROOT + 'SUP/CustomCommon/GetGuid',
                    success: function (response) {
                        record.rel_key1 = response.responseText;
                        curStore.insert(curStore.getCount(), record);
                    }
                });
                return;
            }
        }

        curStore.insert(curStore.getCount(), record);
    }
");
            
            #line 1031 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1033 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("addrow") || Toolbar.RNgButtons.Contains("addrow")) { 
            
            #line default
            #line hidden
            this.Write("   \r\n   ");
            
            #line 1035 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
if (AllGrids.Count==1) { 
            
            #line default
            #line hidden
            this.Write("   ");
            
            #line 1036 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < AllGrids.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1037 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (!AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("   ngToolbar.get(\'addrow\').on(\'click\', function () {\r\n\t    ");
            
            #line 1039 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Reltable != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\tAddRowHandle(curGrid.getSelectionModel());\r\n\t\t");
            
            #line 1041 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("        var data = curGrid.getSelectionModel();\r\n        curStore.insert(curStore" +
                    ".getCount(), data);\r\n\t\t");
            
            #line 1044 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("    });\r\n   ");
            
            #line 1046 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 }else{ 
            
            #line default
            #line hidden
            this.Write(@"
   ngToolbar.get('addrow').on('click', function () {
	    var data = curGrid.getSelectionModel().getSelection();
        if (data[0].length == 0) {
            Ext.MessageBox.alert('提示', '请选中行之后再新增');
            return;
        }
        if (data[0].raw.leaf) {
            var p = new Object({
                myLevel: data[0].raw.myLevel,
                leaf:true,
				s_tree_id:parseInt(data[0].raw.s_tree_id)+1,
                s_tree_pid: data[0].raw.s_tree_pid
            });
            data[0].parentNode.appendChild(p);
        }
        else {
            Ext.MessageBox.alert('提示', '只有叶子节点才能新增行');
        }
	 });
   ");
            
            #line 1067 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n   ");
            
            #line 1069 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\r\n     ");
            
            #line 1071 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 }else{ 
            
            #line default
            #line hidden
            this.Write("\t   ngToolbar.get(\'addrow\').on(\'click\', function () {\r\n\t    ");
            
            #line 1073 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Reltable != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\tAddRowHandle(curGrid.getSelectionModel());\r\n\t\t");
            
            #line 1075 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("        var data = curGrid.getSelectionModel();\r\n        curStore.insert(curStore" +
                    ".getCount(), data);\r\n\t\t");
            
            #line 1078 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("    });\r\n\t");
            
            #line 1080 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1082 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1084 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("deleterow") || Toolbar.RNgButtons.Contains("deleterow")) { 
            
            #line default
            #line hidden
            this.Write("    //删行\r\n\t");
            
            #line 1086 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
if (AllGrids.Count==1) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1087 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < AllGrids.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1088 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (!AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write(@"    ngToolbar.get('deleterow').on('click', function () {
		var data = curGrid.getSelectionModel().getSelection();
        if (data.length > 0) {
            var index = curStore.indexOf(data[0]);
            
            Ext.Array.each(data, function (record) {
                curStore.remove(record); //前端删除
            });

            if (curStore.getCount() > 0) {
                if (index >= curStore.getCount()) {
                    index--;
                }
                curGrid.getSelectionModel().select(index);
            }
        }
    });
	 ");
            
            #line 1106 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 }else{ 
            
            #line default
            #line hidden
            this.Write(@"
   ngToolbar.get('deleterow').on('click', function () {
       var data = curGrid.getSelectionModel().getSelection();
        if (data.length > 0) {
            data[0].parentNode.removeChild(data[0]);
		}
        else {
            Ext.MessageBox.alert('提示', '请选中你要删除的行');
        }
	 });
   ");
            
            #line 1117 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n   ");
            
            #line 1119 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("    ");
            
            #line 1120 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 }else{ 
            
            #line default
            #line hidden
            this.Write(@"	      ngToolbar.get('deleterow').on('click', function () {
		var data = curGrid.getSelectionModel().getSelection();
        if (data.length > 0) {
            var index = curStore.indexOf(data[0]);
            
            Ext.Array.each(data, function (record) {
                curStore.remove(record); //前端删除
            });

            if (curStore.getCount() > 0) {
                if (index >= curStore.getCount()) {
                    index--;
                }
                curGrid.getSelectionModel().select(index);
            }
        }
    });
	");
            
            #line 1138 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            
            #line 1139 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1141 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
    if (Expressions.ContainsValue("BeforeSave")) { 
            
            #line default
            #line hidden
            
            #line 1142 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        int count= 1; 
            
            #line default
            #line hidden
            
            #line 1143 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            
            #line 1144 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            if (item.Value == "BeforeSave") { 
            
            #line default
            #line hidden
            this.Write("                    function Validate");
            
            #line 1145 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(count));
            
            #line default
            #line hidden
            this.Write("() {\r\n");
            
            #line 1146 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
                    count++; 
            
            #line default
            #line hidden
            
            #line 1147 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n                    };\r\n");
            
            #line 1149 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        }} 
            
            #line default
            #line hidden
            
            #line 1150 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
    } 
            
            #line default
            #line hidden
            this.Write("\r\n\t//保存函数\r\n\tfunction Save(callback) {\r\n\t\tvar vt = mstform.isValid();\r\n\t\tif (!vt) " +
                    "{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t");
            
            #line 1159 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\tvt = ");
            
            #line 1160 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.isValid();\r\n\t\tif (!vt) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t");
            
            #line 1164 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t//保存前检测函数\r\n\t\tif (typeof beforeSaveEdit === \"function\") {\r\n\t\t\tif (!beforeSaveE" +
                    "dit()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t");
            
            #line 1173 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
    if (Expressions.ContainsValue("BeforeSave") ) { 
            
            #line default
            #line hidden
            this.Write(" \r\n\t");
            
            #line 1174 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        int count= 1; 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1175 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1176 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            if (item.Value == "BeforeSave"){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\tif (!Validate");
            
            #line 1177 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(count));
            
            #line default
            #line hidden
            this.Write("())\r\n\t\t\t\t\t\t\treturn;\r\n\t");
            
            #line 1179 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
                count++; 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1180 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            }}} 
            
            #line default
            #line hidden
            this.Write("    \r\n\t\t\r\n\t");
            
            #line 1182 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (HasBlobdoc == "1") { 
            
            #line default
            #line hidden
            this.Write(@"		//金格控件保存
		if (window.frames['webofficeiframe']) {
			var res = window.frames['webofficeiframe'].SaveDocument();
			if (!res || res == '' || res == '0') {
				Ext.MessageBox.alert('提示', '金格保存失败！');
				return;
			}

			Ext.getCmp('blobdocid').setValue(res);
		}
	");
            
            #line 1193 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\tvar formData = mstform.getFormData();\r\n\r\n\t");
            
            #line 1197 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t    ");
            
            #line 1198 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Reltable != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\tvar flag = false;\r\n\t\tfor (var i = 0; i < slaReltables.length; i++)\r\n\t\t{\r\n\t\t    " +
                    "if (\'");
            
            #line 1202 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("\' == slaReltables[i]) {\t\t\t    \r\n\t\t\t\tflag = true;\r\n\t\t        break;\r\n\t\t    }\r\n\t\t}\r" +
                    "\n\t\tif (flag) {\r\n\t\t    ");
            
            #line 1208 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("store.clearFilter();\r\n            var ");
            
            #line 1209 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("Data = ");
            
            #line 1209 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.getChange();\r\n            ");
            
            #line 1210 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("store.filterBy(");
            
            #line 1210 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("store.filter);\r\n\t\t} else {\r\n\t\t    var ");
            
            #line 1212 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("Data = ");
            
            #line 1212 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.getChange();\r\n\t\t}\r\n\t\t");
            
            #line 1214 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t    var ");
            
            #line 1215 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("Data = ");
            
            #line 1215 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.getChange();\t    \r\n\t\t");
            
            #line 1216 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1217 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 1219 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Expressions.ContainsValue("SaveUpdate") ) { 
            
            #line default
            #line hidden
            this.Write(" \r\n\t\tvar sqlstr=\"\";\r\n\t\tvar execstr=\"\";\r\n\t");
            
            #line 1222 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
        foreach (var item in Expressions) { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1223 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            if (item.Value == "SaveUpdate") { 
            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 1224 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(item.Key));
            
            #line default
            #line hidden
            this.Write("\r\n\t");
            
            #line 1225 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 }}} 
            
            #line default
            #line hidden
            this.Write("\r\n\t\tExt.Ajax.request({\r\n\t\t\tparams: {\r\n\t\t\t\t\'formData\': formData\r\n\t\t\t\t,\'phidtemplat" +
                    "e\': PhidTemplate\r\n\t\t\t");
            
            #line 1231 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("   \r\n\t\t\t\t,\'");
            
            #line 1232 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("Data\':");
            
            #line 1232 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("Data\r\n\t\t\t");
            
            #line 1233 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t,\'extendParam\': typeof getSaveDataEdit === \"function\" ? getSaveDataEdit(\'Save" +
                    "\') : \'\'  //获取需保存数据\r\n\t\t\t");
            
            #line 1235 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Expressions.ContainsValue("SaveUpdate") ) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t,\'sql\': sqlstr\r\n\t\t\t\t,\'exec\': execstr\r\n\t\t\t");
            
            #line 1238 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("  \r\n\t\t\t},\r\n\t\t\turl: C_ROOT + \'");
            
            #line 1240 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1240 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"Edit/save',
			async: false, //同步请求
			success: function (response) {
				if (Ext.isEmpty(response.responseText)) {
                    Ext.MessageBox.alert('提示', '保存失败，服务端发生异常');
                    return;
                }

				var resp = Ext.JSON.decode(response.responseText);
				if (resp.Status === ""OK"") {
					//工作流界面点提交或保存
                    if (WorkFlowInfo.wfotype) {
                        if (callback != '') {  //提交
                            callback();
                        }
                        else {  //保存
                            Ext.MessageBox.alert('提示', ""保存成功"");
                        }
                    }
                    else {
                        Ext.MessageBox.alert('提示', ""保存成功"", function () {
                            //重刷编辑窗口
							var url = C_ROOT + '");
            
            #line 1262 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1262 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit?otype=edit&id=\' + resp.id + \'&appTitle=");
            
            #line 1262 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("-修改\';\r\n\r\n\t\t\t\t\t\t");
            
            #line 1264 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if(HasBlobdoc != "0" || HasReport != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t\turl += \'&ie=1\';\r\n\t\t\t\t\t\t");
            
            #line 1266 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
							//是任务分解模板
                            if (!Ext.isEmpty(PhidTemplate)) {
                                url += '&phidtemplate=' + PhidTemplate;
                            }

                            window.location.href = url;

                            //刷新列表
                            if (typeof window.external.RefreshWebListPage === ""function"") {
                                window.external.RefreshWebListPage();
                            } else {
                                var frame = $GetWFrame();
                                if (frame) {
                                    var listref = frame.ListObserver.get(eform);
                                    if (listref) {
                                        listref.fireEvent('refreshlist');
                                    }
                                }
                            }
                        });
                    }
				} else {
					Ext.MessageBox.alert('提示', '保存失败');
				}
			}
		});
	}

");
            
            #line 1296 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("save") || Toolbar.RNgButtons.Contains("save")) { 
            
            #line default
            #line hidden
            this.Write(@"	//保存
	ngToolbar.get('save').on('click', function () {
		if (isForbidSave)
		{
			return;
		}
		//设置禁止保存变量，并且保存按钮暂时置灰
		isForbidSave = true;
		ngToolbar.get('save').disable();
		Save('');
		isForbidSave = false;
		ngToolbar.get('save').enable();
	});
");
            
            #line 1310 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
    //审核
	if (ngToolbar.get('verify')) {
		ngToolbar.get('verify').on('click', function () {
			if (isModifyed()) {
				Ext.MessageBox.alert('提示', '单据已修改，请先保存');
				return;
			}

			var operate = ngToolbar.get('verify').text;

			if (Ext.getCmp('ischeck').getValue() == '1') {
                Ext.MessageBox.alert('提示', '该单据已审核，不能重复审核!');
                return;
            }

			//审核前检测函数
			if (typeof beforeVerifyEdit === ""function"") {
				if (!beforeVerifyEdit()) {
					return;
				}
			}

			var paramvalue = C_ROOT + '");
            
            #line 1334 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1334 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"Edit?otype=view&id=' + busid + '&ie=1&isapplycheck=1*web';
			var receiverid = Ext.getCmp('checkpsn').getValue();
		
			Ext.Ajax.request({
				params: {
					'id': busid,
					'isapplycheck': IsApplyCheck,
					'paramvalue': paramvalue,
					'receiverid': receiverid,
					'extendParam': typeof getSaveDataEdit === ""function"" ? getSaveDataEdit('Verify') : ''  //获取需保存数据
				},
				url: C_ROOT + '");
            
            #line 1345 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1345 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"List/Verify',
				async: false, //同步请求
				success: function (response) {
					var resp = Ext.JSON.decode(response.responseText);
					if (resp.status === ""OK"") {
						//审核成功
						if (Ext.getCmp('ischeck')) {
							Ext.getCmp('ischeck').setValue(1);
						}
						if (Ext.getCmp('check_dt')) {
							Ext.getCmp('check_dt').setValue(CurDate);
						}
						if (Ext.getCmp('checkpsn')) {
							Ext.getCmp('checkpsn').setValue($appinfo.userID);
							var codectl = [];
							codectl.push(Ext.getCmp('checkpsn'));
							BatchBindCombox(codectl);
						}

						//ngToolbar.get('unverify').enable();
						//ngToolbar.get('verify').disable();

						//界面只读
						if (ngToolbar.get('addrow')) {
							ngToolbar.get('addrow').disable();
						}
						if (ngToolbar.get('deleterow')) {
							ngToolbar.get('deleterow').disable();
						}
						if (ngToolbar.get('save')) {
							ngToolbar.get('save').disable();
						}
						otype = 'view';
						mstform.setFormReadOnly(true);
						");
            
            #line 1379 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t\t");
            
            #line 1380 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.setGridReadOnly(true);\r\n\t\t\t\t\t\t");
            
            #line 1381 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
						//form原始值更新
						mstform.OriginValue = JSON.stringify(mstform.getForm().getValues());

						Ext.MessageBox.alert('提示', operate + ""成功!"", function () {
							if (typeof window.external.RefreshWebListPage === ""function"") {
								window.external.RefreshWebListPage();
							} else {
                        	    var frame = $GetWFrame();
                        	    if (frame) {
                            	    var listref = frame.ListObserver.get(eform);
                            	    if (listref) {
                                	    listref.fireEvent('refreshlist');
                            	    }
                        	    }
                   	 	    }
						});
					} else {
						Ext.MessageBox.alert( '提示', operate + ""失败!"");
					}
				}
			});
		});
	}

	//去审核
	if (ngToolbar.get('unverify')) {
		ngToolbar.get('unverify').on('click', function () {
			if (isModifyed()) {
				Ext.MessageBox.alert('提示', '单据已修改，请先保存');
				return;
			}

			var operate = ngToolbar.get('unverify').text;		

			if (Ext.getCmp('ischeck').getValue() != '1') {
                Ext.MessageBox.alert('提示', '该单据未审核，不能重复去审!');
                return;
            }

			//审核/去审核前检测函数
			if (typeof beforeUnVerifyEdit === ""function"") {
				if (!beforeUnVerifyEdit()) {
					return;
				}
			}

			var paramvalue = C_ROOT + '");
            
            #line 1429 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1429 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"Edit?otype=view&id=' + busid + '&ie=1&isapplycheck=1*web';
			var receiverid = Ext.getCmp('checkpsn').getValue();
		
			Ext.Ajax.request({
				params: {
					'id': busid,
					'isapplycheck': IsApplyCheck,
					'paramvalue': paramvalue,
					'receiverid': receiverid,
					'extendParam': typeof getSaveDataEdit === ""function"" ? getSaveDataEdit('UnVerify') : ''  //获取需保存数据
				},
				url: C_ROOT + '");
            
            #line 1440 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1440 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("List/Verify\',\r\n\t\t\t\tasync: false, //同步请求\r\n\t\t\t\tsuccess: function (response) {\r\n\t\t\t\t" +
                    "\tvar resp = Ext.JSON.decode(response.responseText);\r\n\t\t\t\t\tif (resp.status === \"O" +
                    "K\") {\t\t\t\t\r\n\t\t\t\t\t\t//去审核成功\r\n\t\t\t\t\t\t//申请去审打开时去审核后直接关闭窗口\r\n\t\t\t\t\t\tif (IsApplyCheck == \'" +
                    "1\') {\r\n\t\t\t\t\t\t\tExt.MessageBox.alert(\'提示\', operate + \"成功!\", function () {\r\n\t\t\t\t\t\t\t" +
                    "\tif (typeof window.external.RefreshWebListPage === \"function\") {\r\n\t\t\t\t\t\t\t\t\twindo" +
                    "w.external.RefreshWebListPage();\r\n\t\t\t\t\t\t\t\t} else {\r\n                        \t   " +
                    "     var frame = $GetWFrame();\r\n                        \t        if (frame) {\r\n " +
                    "                           \t        var listref = frame.ListObserver.get(eform);" +
                    "\r\n                            \t        if (listref) {\r\n                         " +
                    "       \t        listref.fireEvent(\'refreshlist\');\r\n                            \t" +
                    "        }\r\n                        \t        }\r\n                   \t \t        }\r\n" +
                    "\t\t\t\t\t\t\t\t$CloseTab();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (Ext.getCm" +
                    "p(\'ischeck\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'ischeck\').setValue(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (E" +
                    "xt.getCmp(\'check_dt\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'check_dt\').setValue(null);\r\n\t\t\t\t\t\t}" +
                    "\r\n\t\t\t\t\t\tif (Ext.getCmp(\'checkpsn\')) {\r\n\t\t\t\t\t\t\tExt.getCmp(\'checkpsn\').setValue(nu" +
                    "ll);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//ngToolbar.get(\'verify\').enable();\r\n\t\t\t\t\t\t//ngToolbar.ge" +
                    "t(\'unverify\').disable();\r\n\r\n\t\t\t\t\t\t//界面去只读\r\n\t\t\t\t\t\tif (ngToolbar.get(\'addrow\')) {\r" +
                    "\n\t\t\t\t\t\t\tngToolbar.get(\'addrow\').enable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ngToolbar.get(\'del" +
                    "eterow\')) {\r\n\t\t\t\t\t\t\tngToolbar.get(\'deleterow\').enable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (ngT" +
                    "oolbar.get(\'save\')) {\r\n\t\t\t\t\t\t\tngToolbar.get(\'save\').enable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tot" +
                    "ype = \'edit\';\r\n\t\t\t\t\t\tmstform.setFormReadOnly(false);\r\n\t\t\t\t\t\t");
            
            #line 1490 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t\t\t");
            
            #line 1491 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.setGridReadOnly(false);\r\n\t\t\t\t\t\t");
            
            #line 1492 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
						//form原始值更新
						mstform.OriginValue = JSON.stringify(mstform.getForm().getValues());

						Ext.MessageBox.alert('提示', operate + ""成功!"", function () {
							if (typeof window.external.RefreshWebListPage === ""function"") {
								window.external.RefreshWebListPage();
							} else {
                        	    var frame = $GetWFrame();
                        	    if (frame) {
                            	    var listref = frame.ListObserver.get(eform);
                            	    if (listref) {
                                	    listref.fireEvent('refreshlist');
                            	    }
                        	    }
                   	 	    }
						});
					} else {
						Ext.MessageBox.alert( '提示', operate + ""失败!"");
					}
				}
			});
		});
	}

");
            
            #line 1518 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("check") || Toolbar.RNgButtons.Contains("check")) { 
            
            #line default
            #line hidden
            this.Write("    //送审\r\n    ngToolbar.get(\'check\').on(\'click\',function(){\r\n\t\tif (isModifyed()) " +
                    "{\r\n            Ext.MessageBox.alert(\'提示\', \'单据已修改，请先保存\');\r\n            return;\r\n " +
                    "       }\r\n\r\n\t\t$WorkFlow.startFlow(\'");
            
            #line 1526 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write(@"', busid, function () {
			if (Ext.getCmp('is_wf')) {
				Ext.getCmp('is_wf').setValue('1'); 
			}

			//界面只读
			if (ngToolbar.get('addrow')) {
                ngToolbar.get('addrow').disable();
            }
            if (ngToolbar.get('deleterow')) {
                ngToolbar.get('deleterow').disable();
            }
			if (ngToolbar.get('import')) {
                ngToolbar.get('import').disable();
            }
			if (ngToolbar.get('save')) {
                ngToolbar.get('save').disable();
            }
			otype = 'view';
            mstform.setFormReadOnly(true);
			");
            
            #line 1546 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t");
            
            #line 1547 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.setGridReadOnly(true);\r\n\t\t\t");
            
            #line 1548 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
			//form原始值更新
			mstform.OriginValue = JSON.stringify(mstform.getForm().getValues());

			if (typeof window.external.RefreshWebListPage === ""function"") {
				window.external.RefreshWebListPage();
			} else {
                var frame = $GetWFrame();
                if (frame) {
                    var listref = frame.ListObserver.get(eform);
                    if (listref) {
                        listref.fireEvent('refreshlist');
                    }
                }
            }
		});
	});
");
            
            #line 1566 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1568 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("history") || Toolbar.RNgButtons.Contains("history")) { 
            
            #line default
            #line hidden
            this.Write("\t//送审追踪\r\n\tngToolbar.get(\'history\').on(\'click\',function(){ \r\n\t\t$WorkFlow.showFlowI" +
                    "nfo(\'");
            
            #line 1571 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\', busid);\r\n\t});\r\n");
            
            #line 1573 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1575 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("applycheck") || Toolbar.RNgButtons.Contains("applycheck")) { 
            
            #line default
            #line hidden
            this.Write(@"	//申请去审
	ngToolbar.get('applycheck').on('click',function(){ 
	    if (!Ext.getCmp('ocode')) {
            Ext.MessageBox.alert('提示', ""[设计问题]表头没有组织列"");
            return;
        }
        if (!Ext.getCmp('checkpsn')) {
            Ext.MessageBox.alert('提示', ""[设计问题]表头没有审核人列"");
            return;
        }

        var chkflg = Ext.getCmp('ischeck').getValue();
        if (chkflg != ""1"") {
            Ext.MessageBox.alert('提示', '该单据未审核，不能申请去审!');
            return;
        }

		var billno = Ext.getCmp('bill_no').getValue();
        var busTitle = '");
            
            #line 1594 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("\';\r\n        var ocode = Ext.getCmp(\'ocode\').getValue();\r\n        var receiverid =" +
                    " Ext.getCmp(\'checkpsn\').getValue();\r\n\t\tvar receivername = Ext.getCmp(\'checkpsn\')" +
                    ".getRawValue();\r\n\t\tvar url = C_ROOT + \'");
            
            #line 1598 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1598 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write(@"Edit?otype=view&id=' + busid + '&ie=1&isapplycheck=1*web';

        Ext.Ajax.request({
            params: {
                id: busid,
				billno: billno,
				busTitle: busTitle,
				ocode: ocode,
                receiverid: receiverid,
				receivername: receivername,
                urlLink: url
            },
            url: C_ROOT + 'SUP/CustomCommon/ApplyCheckParam',
            async: false, //同步请求
            success: function (response) {
                var ret = response.responseText;
                var url = C_ROOT + 'SUP/ApplyCheck/ApplyCheck?params=' + ret;
                $OpenTab(busTitle + '-申请去审', url);
            }
        });
	});
");
            
            #line 1619 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1621 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("import") || Toolbar.RNgButtons.Contains("import")) { 
            
            #line default
            #line hidden
            this.Write("\t//导入\r\n    ngToolbar.get(\'import\').on(\'click\', function () {\r\n\t\tif (Ext.isEmpty(c" +
                    "urGrid)) {\r\n            Ext.MessageBox.alert(\'提示\', \"请先选中grid\");\r\n            ret" +
                    "urn;\r\n        }\r\n\r\n        Ext.create(\'Ext.Gc.ExcelImport\', {\r\n            busiT" +
                    "ype: eform,\r\n            busiGrid: curGrid,\r\n\t\t\tiseform: true,\r\n            befo" +
                    "reCreate: function (columndata) {\r\n\t\t\t    var dataIndexs = [];\r\n\t\t\t    Ext.Array" +
                    ".each(columndata, function (col) {\r\n\t\t\t        Ext.Array.include(dataIndexs, col" +
                    ".dataIndex);\r\n\t\t\t    });\r\n\r\n\t\t\t    Ext.Array.each(columndata, function (col) {\r\n" +
                    "\t\t\t\t    if (col.dataIndex == \'c_name\') {\r\n\t\t\t\t        col.helpId = \'itemdata|ite" +
                    "mid\';\r\n\t\t\t\t    } else if (col.dataIndex == \'pc_name\') {\r\n\t\t\t\t        col.helpId " +
                    "= \'pms3.project_table|pc\';\r\n\t\t\t\t    } else if (col.dataIndex == \'custno_name\') {" +
                    "\r\n\t\t\t\t        col.helpId = \'fg3_enterprise|custno\';\r\n\t\t\t\t    } else if (col.data" +
                    "Index == \'vendor_id_name\') {\r\n\t\t\t\t        col.helpId = \'fg3_enterprise|vendor_id" +
                    "\';\r\n\t\t\t\t    } else if (col.dataIndex == \'manufacturer_id_name\') {\r\n\t\t\t\t        c" +
                    "ol.helpId = \'fg3_enterprise|manufacturer_id\';\r\n\t\t\t\t    } else if (col.dataIndex " +
                    "== \'cbsid_name\') {\r\n\t\t\t\t        col.helpId = \'pms3.bd_cbs|cbsid\';\r\n\t\t\t\t    } els" +
                    "e if (col.dataIndex == \'org_id_name\') {\r\n\t\t\t\t        col.helpId = \'fg3_enterpris" +
                    "e|org_id\';\r\n\t\t\t\t    } else if (col.dataIndex == \'empid_name\') {\r\n\t\t\t\t        col" +
                    ".helpId = \'hr3.hr_epm_main|empid\';\r\n\t\t\t\t    } else if (col.dataIndex == \'wbscode" +
                    "_name\') {\r\n\t\t\t\t        col.helpId = \'pmm3.bd_wbs|wbscode\';\r\n\t\t\t\t    } else if (c" +
                    "ol.dataIndex == \'forwarder_id_name\') {\r\n\t\t\t\t        col.helpId = \'fg3_enterprise" +
                    "|forwarder_id\';\r\n\t\t\t\t    } else if (col.dataIndex == \'deptid_name\') {\r\n\t\t\t\t     " +
                    "   col.helpId = \'fg_orglist|deptid\';\r\n\t\t\t\t    } else {\r\n\t\t\t            if (col.d" +
                    "ataIndex.indexOf(\'_name\') > -1) {\r\n\t\t\t                var temp = col.dataIndex.r" +
                    "eplace(\'_name\', \'\');\r\n\t\t\t                if (Ext.Array.contains(dataIndexs, temp" +
                    ")) {\r\n\t\t\t                    Ext.Array.each(curGrid.columns, function (gridcol) " +
                    "{\r\n\t\t\t\t\t\t\t        if (gridcol.items.length > 0) {\r\n\t\t\t\t\t\t\t\t        Ext.Array.eac" +
                    "h(gridcol.items.items, function (griditemscol) {\r\n\t\t\t\t\t\t\t\t\t        if (griditems" +
                    "col.dataIndex == col.dataIndex) {\r\n\t\t\t                                    if (gr" +
                    "iditemscol.helpid != undefined) {\r\n\t\t\t                                        co" +
                    "l.helpId = griditemscol.helpid + \'|\' + temp;\r\n\t\t\t                               " +
                    "     } else if (griditemscol.editor != undefined && griditemscol.editor.helpid !" +
                    "= undefined) {\r\n\t\t\t                                        col.helpId = griditem" +
                    "scol.editor.helpid + \'|\' + temp;\r\n\t\t\t                                    }\r\n\t\t\t " +
                    "                               }\r\n\t\t\t\t\t\t\t\t        })\r\n\t\t\t\t\t\t\t        } else {\r\n\t" +
                    "\t\t                            if (gridcol.dataIndex == col.dataIndex) {\r\n\t\t\t    " +
                    "                            if (gridcol.helpid != undefined) {\r\n\t\t\t             " +
                    "                       col.helpId = gridcol.helpid + \'|\' + temp;\r\n\t\t\t           " +
                    "                     } else if (gridcol.editor != undefined && gridcol.editor.he" +
                    "lpid != undefined) {\r\n\t\t\t                                    col.helpId = gridco" +
                    "l.editor.helpid + \'|\' + temp;\r\n\t\t\t                                }\r\n\t\t\t        " +
                    "                    }\r\n\t\t\t                        }\r\n\t\t\t                    })\r\n" +
                    "\t\t\t                }\r\n\t\t\t\t\t    }\r\n\t\t\t\t    }\r\n\t\t\t    })\r\n            },\r\n        " +
                    "    listeners: {\r\n                \'helpselected\': function (obj) {\r\n            " +
                    "        var msgbox = Ext.Msg.show({\r\n                        title: \'正在导入Excel数据" +
                    "\',\r\n\t\t\t\t\t    width: 350,\r\n\t\t\t\t\t    model: true,\r\n\t\t\t\t\t    progress: true\r\n\t\t\t\t  " +
                    "  });\r\n\r\n                    intervalHandle(0, obj, msgbox);\r\n                }\r" +
                    "\n            }\r\n        }).show();\r\n    });\r\n");
            
            #line 1706 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"
    function intervalHandle(i, obj, msgbox) {
        _returnInterval = setInterval(function () {
            clearInterval(_returnInterval);

            if (i != obj.data.length - 1) {
                msgbox.updateProgress(i / obj.data.length, ""正在处理第"" + (i + 1) + ""/"" + obj.data.length + ""行数据"");
            } else {
                msgbox.hide();
            }

        ");
            
            #line 1718 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Reltable != "0") { 
            
            #line default
            #line hidden
            this.Write("            AddRowHandle(obj.data[i].data);\r\n        ");
            
            #line 1720 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write(@"            var record = obj.data[i].data;
            if (record.hasOwnProperty(""phid_itemdata"") && record.hasOwnProperty(""phid_itemdata"")) {
			    if (record.itemid == ''){
				    record.c_name = '';
				} else {
				    record.phid_itemdata = record.itemid;
				}
            }
            curStore.insert(curStore.getCount(), record);
        ");
            
            #line 1730 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n            if (i < obj.data.length - 1) {\r\n                intervalHandle(i + " +
                    "1, obj, msgbox)\r\n            }\r\n        }, 1);\r\n    }\r\n\r\n");
            
            #line 1738 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("attachment") || Toolbar.RNgButtons.Contains("attachment")) { 
            
            #line default
            #line hidden
            this.Write("\t//附件\r\n\tngToolbar.get(\'attachment\').on(\'click\', function () {\r\n\t\tOpenAttachment(\'" +
                    "form\', \'");
            
            #line 1741 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableName));
            
            #line default
            #line hidden
            this.Write("\');\r\n\t});\r\n");
            
            #line 1743 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1745 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("subbill") || Toolbar.RNgButtons.Contains("subbill")) { 
            
            #line default
            #line hidden
            this.Write(@"	//下达
	ngToolbar.get('subbill').on('click',function(){
		if (isModifyed()) {
            Ext.MessageBox.alert('提示', '单据已修改，请先保存');
            return;
        }
		 
		var phidbill = busid;  //表单主键
        var phidwork = Ext.getCmp('s_task_wf').getValue();  //流程主键

		if (Ext.isEmpty(phidbill) || Ext.isEmpty(phidwork)) {
            Ext.MessageBox.alert('提示', '表单主键和流程主键不能为空');
            return;
        }
		
		$Work.BreakDownNodeAddNext(phidwork, phidbill);
	});
");
            
            #line 1763 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1765 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("ok") || Toolbar.RNgButtons.Contains("ok")) { 
            
            #line default
            #line hidden
            this.Write(@"	//提交
	ngToolbar.get('ok').on('click',function(){
		if (isModifyed()) {
            Ext.MessageBox.alert('提示', '单据已修改，请先保存');
            return;
        }

		var phidbill = busid;  //表单主键
        var phidworknode = Ext.getCmp('s_task_node').getValue();  //节点主键

		if (Ext.isEmpty(phidbill) || Ext.isEmpty(phidworknode)) {
            Ext.MessageBox.alert('提示', '表单主键和节点主键不能为空');
            return;
        }
		
		$Work.BreakDownNodeComplete(phidworknode, phidbill);
	});
");
            
            #line 1783 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1785 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("query") || Toolbar.RNgButtons.Contains("query")) { 
            
            #line default
            #line hidden
            this.Write(@"	//汇总
	ngToolbar.get('query').on('click',function(){
		if (isModifyed()) {
            Ext.MessageBox.alert('提示', '单据已修改，请先保存');
            return;
        }

		var phidwork = Ext.getCmp('s_task_wf').getValue();  //流程主键
		var phidworknode = Ext.getCmp('s_task_node').getValue();  //节点主键

		if (Ext.isEmpty(phidwork) || Ext.isEmpty(phidworknode)) {
			Ext.MessageBox.alert('提示', '流程主键和节点主键不能为空');
			return;
		}

		Ext.Ajax.request({
			params: { 'nodephid': phidworknode },
			async: false,
			url: C_ROOT + 'Work/BreakDown/GetNodeChildBill',
			success: function (response) {
				var data = Ext.JSON.decode(response.responseText);

				if (data.length > 0) {
					var ids = '';
					Ext.Array.each(data, function (rd) {
						if (rd.nodestate != '2') {
                            Ext.MessageBox.alert('提示', '部分下级节点数据未提交，不能汇总');
                            return false;
                        }

						if (!Ext.isEmpty(rd.phidbill)) {
							ids += rd.phidbill + ',';
						}						
					});

					if (ids == '') {
						Ext.MessageBox.alert('提示', '任务中心返回值为空，下级节点数据未提交');
						return false;
					}

					ids = ids.substr(0, ids.length - 1);
			");
            
            #line 1827 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < AllGrids.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t");
            
            #line 1828 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (AllGrids[i].ColumnNames.Contains("s_tree_no")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 1829 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("grid.loadByUrl(C_ROOT + \'");
            
            #line 1829 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1829 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit/Get");
            
            #line 1829 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("List?istreegrid=1&bustype=1&id=\' + busid + \"&ids=\" + ids + \'&phidwork=\' + phidwor" +
                    "k);\r\n\t\t\t\t");
            
            #line 1830 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\tExt.apply(");
            
            #line 1831 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.proxy.extraParams, { \'id\': busid, \'bustype\': 1, \'ids\': ids, \'phidwork\': phi" +
                    "dwork });\r\n\t\t\t\t\t");
            
            #line 1832 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.cachePageData = false;\r\n\t\t\t\t\t");
            
            #line 1833 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.load();\r\n\t\t\t\t\t");
            
            #line 1834 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AllGrids[i].TableName));
            
            #line default
            #line hidden
            this.Write("store.cachePageData = true;\r\n\t\t\t\t");
            
            #line 1835 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t");
            
            #line 1836 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t} else {\r\n\t\t\t\t\tExt.MessageBox.alert(\'提示\', \'没有可汇总下级节点数据\');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});" +
                    "\t\t\t\r\n\t});\r\n");
            
            #line 1843 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1845 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("deal") || Toolbar.RNgButtons.Contains("deal")) { 
            
            #line default
            #line hidden
            this.Write(@"	//原汇总信息
	ngToolbar.get('deal').on('click',function(){
		var phidwork = Ext.getCmp('s_task_wf').getValue();  //流程主键
		var phidworknode = Ext.getCmp('s_task_node').getValue();  //节点主键

		if (Ext.isEmpty(phidwork) || Ext.isEmpty(phidworknode)) {
			Ext.MessageBox.alert('提示', '流程主键和节点主键不能为空');
			return;
		}

		Ext.Ajax.request({
			params: { 'nodephid': phidworknode },
			async: false,
			url: C_ROOT + 'Work/BreakDown/GetNodeChildBill',
			success: function (response) {
				var data = Ext.JSON.decode(response.responseText);

				if (data.length > 0) {
					var ids = '';
					Ext.Array.each(data, function (rd) {
						if (!Ext.isEmpty(rd.phidbill)) {
							ids += rd.phidbill + ',';
						}						
					});

					if (ids == '') {
						Ext.MessageBox.alert('提示', '任务中心返回值为空，下级节点数据未提交');
						return;
					}

					ids = ids.substr(0, ids.length - 1);

					var url = C_ROOT + '");
            
            #line 1878 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Area));
            
            #line default
            #line hidden
            this.Write("/");
            
            #line 1878 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("Edit?otype=view&bustype=2&id=\' + busid + \'&ids=\' + ids + \'&phidwork=\' + phidwork;" +
                    "\r\n\t\t\t\t\t");
            
            #line 1879 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if(HasBlobdoc != "0") { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\turl += \'&ie=1\';\r\n\t\t\t\t\t");
            
            #line 1881 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t$OpenTab(\'");
            
            #line 1882 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("-原汇总信息\', url);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tExt.MessageBox.alert(\'提示\', \'没有可汇总下级节点数据\');\r\n\t\t" +
                    "\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n");
            
            #line 1889 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1891 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("print") || Toolbar.RNgButtons.Contains("print")) { 
            
            #line default
            #line hidden
            this.Write("    //打印\r\n    ngToolbar.get(\'print\').on(\'click\', function () {        \r\n\t\t");
            
            #line 1894 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (PanelNames.Count == 0){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t$PrintHelp(\"");
            
            #line 1895 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("\", \'");
            
            #line 1895 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\', mstform, [], [\"");
            
            #line 1895 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("\"]);\r\n\t\t");
            
            #line 1896 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
  }else { 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\tvar grids = [ ");
            
            #line 1898 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write("   \r\n\t\t\t\t");
            
            #line 1899 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (i == PanelNames.Count-1){ 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 1900 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid ];\r\n\t\t\t\t");
            
            #line 1901 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 }else{ 
            
            #line default
            #line hidden
            this.Write(" \r\n\t\t\t\t\t");
            
            #line 1902 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid, \r\n\t\t\t\t");
            
            #line 1903 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t");
            
            #line 1904 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t$PrintHelp(\"");
            
            #line 1906 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(ClassName));
            
            #line default
            #line hidden
            this.Write("\", \'");
            
            #line 1906 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(EForm));
            
            #line default
            #line hidden
            this.Write("\', mstform, grids, [\"");
            
            #line 1906 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Title));
            
            #line default
            #line hidden
            this.Write("\"]);\r\n\t\t");
            
            #line 1907 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
  } 
            
            #line default
            #line hidden
            this.Write("    }); \r\n");
            
            #line 1909 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 1911 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 if (Toolbar.LNgButtons.Contains("close") || Toolbar.RNgButtons.Contains("close")) { 
            
            #line default
            #line hidden
            this.Write(@"	//关闭
	ngToolbar.get('close').addListener('beforeclose', function () {
        //查看窗口直接关闭
        if (otype == $Otype.VIEW) {
            return true;
        }

        if (isModifyed()) {
            Ext.MessageBox.confirm('提示', '单据未保存，确定关闭？', function (e) {
                if (e == ""yes"") {
                    $CloseTab();
                }
            });
            return false;
        }
        else {
            return true;
        }
    });
");
            
            #line 1931 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\r\n\t//判断表单是否已编辑\r\n    function isModifyed() {\r\n        if (mstform.hasModifyed() ");
            
            #line 1935 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 for (int i = 0; i < PanelNames.Count; i++) { 
            
            #line default
            #line hidden
            this.Write(" || ");
            
            #line 1935 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(PanelNames[i]));
            
            #line default
            #line hidden
            this.Write("grid.hasModifyed() ");
            
            #line 1935 "E:\NG3_Business\BusinessBaseClass\SUP\CustomForm\SUP.CustomForm.ClientGen\PageEditJsTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(" ) {\r\n            return true;\r\n        }\r\n        else {\r\n            return fal" +
                    "se;\r\n        }\r\n    }\r\n\r\n\t//布局后初始化函数\r\n    if (typeof allReadyEdit === \"function\"" +
                    ") {\r\n        allReadyEdit();\r\n    }\r\n\r\n}); \r\n");
            return this.GenerationEnvironment.ToString();
        }
    }
    
    #line default
    #line hidden
    #region Base class
    /// <summary>
    /// Base class for this transformation
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "14.0.0.0")]
    public class PageEditJsTemplateBase
    {
        #region Fields
        private global::System.Text.StringBuilder generationEnvironmentField;
        private global::System.CodeDom.Compiler.CompilerErrorCollection errorsField;
        private global::System.Collections.Generic.List<int> indentLengthsField;
        private string currentIndentField = "";
        private bool endsWithNewline;
        private global::System.Collections.Generic.IDictionary<string, object> sessionField;
        #endregion
        #region Properties
        /// <summary>
        /// The string builder that generation-time code is using to assemble generated output
        /// </summary>
        protected System.Text.StringBuilder GenerationEnvironment
        {
            get
            {
                if ((this.generationEnvironmentField == null))
                {
                    this.generationEnvironmentField = new global::System.Text.StringBuilder();
                }
                return this.generationEnvironmentField;
            }
            set
            {
                this.generationEnvironmentField = value;
            }
        }
        /// <summary>
        /// The error collection for the generation process
        /// </summary>
        public System.CodeDom.Compiler.CompilerErrorCollection Errors
        {
            get
            {
                if ((this.errorsField == null))
                {
                    this.errorsField = new global::System.CodeDom.Compiler.CompilerErrorCollection();
                }
                return this.errorsField;
            }
        }
        /// <summary>
        /// A list of the lengths of each indent that was added with PushIndent
        /// </summary>
        private System.Collections.Generic.List<int> indentLengths
        {
            get
            {
                if ((this.indentLengthsField == null))
                {
                    this.indentLengthsField = new global::System.Collections.Generic.List<int>();
                }
                return this.indentLengthsField;
            }
        }
        /// <summary>
        /// Gets the current indent we use when adding lines to the output
        /// </summary>
        public string CurrentIndent
        {
            get
            {
                return this.currentIndentField;
            }
        }
        /// <summary>
        /// Current transformation session
        /// </summary>
        public virtual global::System.Collections.Generic.IDictionary<string, object> Session
        {
            get
            {
                return this.sessionField;
            }
            set
            {
                this.sessionField = value;
            }
        }
        #endregion
        #region Transform-time helpers
        /// <summary>
        /// Write text directly into the generated output
        /// </summary>
        public void Write(string textToAppend)
        {
            if (string.IsNullOrEmpty(textToAppend))
            {
                return;
            }
            // If we're starting off, or if the previous text ended with a newline,
            // we have to append the current indent first.
            if (((this.GenerationEnvironment.Length == 0) 
                        || this.endsWithNewline))
            {
                this.GenerationEnvironment.Append(this.currentIndentField);
                this.endsWithNewline = false;
            }
            // Check if the current text ends with a newline
            if (textToAppend.EndsWith(global::System.Environment.NewLine, global::System.StringComparison.CurrentCulture))
            {
                this.endsWithNewline = true;
            }
            // This is an optimization. If the current indent is "", then we don't have to do any
            // of the more complex stuff further down.
            if ((this.currentIndentField.Length == 0))
            {
                this.GenerationEnvironment.Append(textToAppend);
                return;
            }
            // Everywhere there is a newline in the text, add an indent after it
            textToAppend = textToAppend.Replace(global::System.Environment.NewLine, (global::System.Environment.NewLine + this.currentIndentField));
            // If the text ends with a newline, then we should strip off the indent added at the very end
            // because the appropriate indent will be added when the next time Write() is called
            if (this.endsWithNewline)
            {
                this.GenerationEnvironment.Append(textToAppend, 0, (textToAppend.Length - this.currentIndentField.Length));
            }
            else
            {
                this.GenerationEnvironment.Append(textToAppend);
            }
        }
        /// <summary>
        /// Write text directly into the generated output
        /// </summary>
        public void WriteLine(string textToAppend)
        {
            this.Write(textToAppend);
            this.GenerationEnvironment.AppendLine();
            this.endsWithNewline = true;
        }
        /// <summary>
        /// Write formatted text directly into the generated output
        /// </summary>
        public void Write(string format, params object[] args)
        {
            this.Write(string.Format(global::System.Globalization.CultureInfo.CurrentCulture, format, args));
        }
        /// <summary>
        /// Write formatted text directly into the generated output
        /// </summary>
        public void WriteLine(string format, params object[] args)
        {
            this.WriteLine(string.Format(global::System.Globalization.CultureInfo.CurrentCulture, format, args));
        }
        /// <summary>
        /// Raise an error
        /// </summary>
        public void Error(string message)
        {
            System.CodeDom.Compiler.CompilerError error = new global::System.CodeDom.Compiler.CompilerError();
            error.ErrorText = message;
            this.Errors.Add(error);
        }
        /// <summary>
        /// Raise a warning
        /// </summary>
        public void Warning(string message)
        {
            System.CodeDom.Compiler.CompilerError error = new global::System.CodeDom.Compiler.CompilerError();
            error.ErrorText = message;
            error.IsWarning = true;
            this.Errors.Add(error);
        }
        /// <summary>
        /// Increase the indent
        /// </summary>
        public void PushIndent(string indent)
        {
            if ((indent == null))
            {
                throw new global::System.ArgumentNullException("indent");
            }
            this.currentIndentField = (this.currentIndentField + indent);
            this.indentLengths.Add(indent.Length);
        }
        /// <summary>
        /// Remove the last indent that was added with PushIndent
        /// </summary>
        public string PopIndent()
        {
            string returnValue = "";
            if ((this.indentLengths.Count > 0))
            {
                int indentLength = this.indentLengths[(this.indentLengths.Count - 1)];
                this.indentLengths.RemoveAt((this.indentLengths.Count - 1));
                if ((indentLength > 0))
                {
                    returnValue = this.currentIndentField.Substring((this.currentIndentField.Length - indentLength));
                    this.currentIndentField = this.currentIndentField.Remove((this.currentIndentField.Length - indentLength));
                }
            }
            return returnValue;
        }
        /// <summary>
        /// Remove any indentation
        /// </summary>
        public void ClearIndent()
        {
            this.indentLengths.Clear();
            this.currentIndentField = "";
        }
        #endregion
        #region ToString Helpers
        /// <summary>
        /// Utility class to produce culture-oriented representation of an object as a string.
        /// </summary>
        public class ToStringInstanceHelper
        {
            private System.IFormatProvider formatProviderField  = global::System.Globalization.CultureInfo.InvariantCulture;
            /// <summary>
            /// Gets or sets format provider to be used by ToStringWithCulture method.
            /// </summary>
            public System.IFormatProvider FormatProvider
            {
                get
                {
                    return this.formatProviderField ;
                }
                set
                {
                    if ((value != null))
                    {
                        this.formatProviderField  = value;
                    }
                }
            }
            /// <summary>
            /// This is called from the compile/run appdomain to convert objects within an expression block to a string
            /// </summary>
            public string ToStringWithCulture(object objectToConvert)
            {
                if ((objectToConvert == null))
                {
                    throw new global::System.ArgumentNullException("objectToConvert");
                }
                System.Type t = objectToConvert.GetType();
                System.Reflection.MethodInfo method = t.GetMethod("ToString", new System.Type[] {
                            typeof(System.IFormatProvider)});
                if ((method == null))
                {
                    return objectToConvert.ToString();
                }
                else
                {
                    return ((string)(method.Invoke(objectToConvert, new object[] {
                                this.formatProviderField })));
                }
            }
        }
        private ToStringInstanceHelper toStringHelperField = new ToStringInstanceHelper();
        /// <summary>
        /// Helper to produce culture-oriented representation of an object as a string
        /// </summary>
        public ToStringInstanceHelper ToStringHelper
        {
            get
            {
                return this.toStringHelperField;
            }
        }
        #endregion
    }
    #endregion
}
